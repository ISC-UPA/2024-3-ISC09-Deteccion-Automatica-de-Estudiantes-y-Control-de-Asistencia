{
  "version": 3,
  "sources": ["../keystone.ts", "../Schema/User.ts", "../Schema/Autentication.ts", "../Schema/AzureADIntegration.ts", "../Schema/RecognitionLog.ts", "../Schema/Class.ts", "../Schema/Attendance.ts", "../Schema/FaceComparison.ts", "../Schema/AccessRecord.ts", "../Schema/Schema.ts"],
  "sourcesContent": ["import { config } from '@keystone-6/core'\r\nimport { lists } from './Schema/Schema';\r\n\r\nexport default config({\r\n  db: {\r\n    provider: 'sqlite',\r\n    url: 'file:./db/classtrack.db',\r\n  },\r\n  lists,\r\n  //session,\r\n});", "// import { allowAll } from '@keystone-6/core/access';\r\n// import { text, select, checkbox } from '@keystone-6/core/fields';\r\n\r\n// export const user = {\r\n//   access: allowAll,\r\n//   fields: {\r\n//     fullName: text({ validation: { isRequired: true } }),\r\n//     email: text({ validation: { isRequired: true } }),\r\n//     phoneNumber: text({ validation: { isRequired: true } }),\r\n//     userRole: select({\r\n//       options: [\r\n//         { label: 'Admin', value: 'admin' },\r\n//         { label: 'Docent', value: 'Docent' },\r\n//         { label: 'Student', value: 'Student' },\r\n//       ],\r\n//       defaultValue: 'Student',\r\n//     }),\r\n//     profilePicture: text(),\r\n//     accountStatus: select({\r\n//       options: [\r\n//         { label: 'Active', value: 'active' },\r\n//         { label: 'Inactive', value: 'inactive' },\r\n//         { label: 'Suspended', value: 'suspended' },\r\n//       ],\r\n//       defaultValue: 'active',\r\n//     }),\r\n//     adAuthenticationStatus: checkbox(),\r\n//   },\r\n// };\r\n\r\nimport { allowAll } from '@keystone-6/core/access';\r\nimport { text, select, password } from '@keystone-6/core/fields';\r\n\r\nexport const user = {\r\n  access: allowAll,\r\n  fields: {\r\n    name: text({ validation: { isRequired: true } }), // Nombre del usuario\r\n    email: text({ \r\n      validation: { isRequired: true },\r\n      isIndexed: 'unique', // Para establecer el campo como \u00FAnico en la base de datos\r\n    }), \r\n    password: password({ validation: { isRequired: true } }), // Contrase\u00F1a\r\n    role: select({\r\n      options: [\r\n        { label: 'Estudiante', value: 'student' },\r\n        { label: 'Profesor', value: 'teacher' },\r\n        { label: 'Administrador', value: 'administrator' },\r\n      ],\r\n      defaultValue: 'student',\r\n      validation: { isRequired: true },\r\n    }),\r\n    studentID: text(), // Solo para estudiantes, se puede dejar vac\u00EDo\r\n    imageURL: text(), // URL de la imagen de perfil del usuario\r\n    embeddings: text(), // Representaci\u00F3n de la imagen en texto para comparaci\u00F3n facial\r\n  },\r\n};\r\n", "import { text, relationship, timestamp, select } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const authentication = {\r\n  access: allowAll,\r\n  fields: {\r\n    tokenId: text({\r\n      isIndexed: 'unique', // Establece el campo como \u00FAnico\r\n      validation: { isRequired: true }, // Campo requerido\r\n    }),\r\n    associatedUser: relationship({\r\n      ref: 'User', // Referencia a la lista de usuarios\r\n      many: false, // Relaci\u00F3n uno a uno\r\n    }),\r\n    expirationDate: timestamp({\r\n      // No se establece un valor por defecto\r\n    }),\r\n    authenticationType: select({\r\n      options: [\r\n        { label: 'JWT', value: 'jwt' },\r\n        { label: 'Azure AD', value: 'azure_ad' },\r\n      ],\r\n      validation: { isRequired: true }, // Campo requerido\r\n    }),\r\n    adAuthenticationToken: text(), // Token de autenticaci\u00F3n de Azure AD\r\n    refreshToken: text(), // Token de actualizaci\u00F3n\r\n  },\r\n};\r\n", "import { text, relationship, select } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const azureADIntegration = {\r\n  access: allowAll,\r\n  fields: {\r\n    adUserId: text({\r\n      isIndexed: 'unique', // Establece el campo como \u00FAnico\r\n      validation: { isRequired: true }, // Campo requerido\r\n    }),\r\n    adTenantId: text({\r\n      validation: { isRequired: true }, // Campo requerido\r\n    }),\r\n    roleMapping: text(), // Mapeo de roles\r\n    accessTokenValidity: select({\r\n      options: [\r\n        { label: 'V\u00E1lido', value: 'true' },\r\n        { label: 'Inv\u00E1lido', value: 'false' },\r\n      ],\r\n      defaultValue: 'true',\r\n      ui: { displayMode: 'segmented-control' },\r\n    }), // Validez del token de acceso\r\n    loginHistory: text(), // Historial de inicio de sesi\u00F3n\r\n    user: relationship({\r\n      ref: 'User', // Referencia a la lista de usuarios\r\n      many: false,\r\n    }),\r\n  },\r\n};\r\n", "import { integer, timestamp, text, relationship, float, select } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const recognitionLog = {\r\n  access: allowAll,\r\n  fields: {\r\n    timestamp: timestamp({\r\n      validation: { isRequired: true },\r\n      defaultValue: { kind: 'now' }, // Configura la fecha actual por defecto\r\n    }),\r\n    success: select({\r\n      options: [\r\n        { label: '\u00C9xito', value: '1' },\r\n        { label: 'Fallo', value: '0' },\r\n      ],\r\n      defaultValue: '0',\r\n      ui: { displayMode: 'segmented-control' },\r\n    }),\r\n    confidence: float({\r\n      validation: { isRequired: true },\r\n    }),\r\n    imageURL: text(), // URL de la imagen capturada por la c\u00E1mara\r\n    errorDetails: text(), // Detalles del error en caso de falla\r\n    user: relationship({\r\n      ref: 'User', // Referencia a la tabla user\r\n      many: false,\r\n      ui: { displayMode: 'select' },\r\n    }),\r\n  },\r\n};\r\n", "import { text, relationship } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const classSchema = {\r\n    access: allowAll,\r\n    fields: {\r\n        name: text({\r\n            validation: { isRequired: true },\r\n            ui: { displayMode: 'input' },\r\n        }), // Nombre de la clase\r\n        description: text(), // Descripci\u00F3n de la clase\r\n        schedule: text({ validation: { length: { max: 50 } } }), // Horario de la clase\r\n        teacher: relationship({\r\n            ref: 'User', // Referencia a la tabla User\r\n            many: false,\r\n            ui: { displayMode: 'select' },\r\n        }),\r\n    },\r\n};\r\n", "import { integer, timestamp, float, text, relationship, select } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const attendance = {\r\n    access: allowAll,\r\n    fields: {\r\n        date: timestamp({\r\n            validation: { isRequired: true },\r\n            defaultValue: { kind: 'now' }, // Configura la fecha actual por defecto\r\n        }),\r\n        recognized: select({\r\n            options: [\r\n                { label: 'Reconocido', value: '1' },\r\n                { label: 'No Reconocido', value: '0' },\r\n            ],\r\n            defaultValue: '0',\r\n            ui: { displayMode: 'segmented-control' },\r\n        }),\r\n        confidenceScore: float({\r\n            validation: { isRequired: true },\r\n        }),\r\n        imageCapturedURL: text(), // URL de la imagen capturada\r\n        user: relationship({\r\n            ref: 'User', // Referencia a la tabla User\r\n            many: false,\r\n            ui: { displayMode: 'select' },\r\n        }),\r\n        class: relationship({\r\n            ref: 'Class', // Referencia a la tabla Class\r\n            many: false,\r\n            ui: { displayMode: 'select' },\r\n        }),\r\n    },\r\n};\r\n", "import { integer, timestamp, text, float, relationship, select } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const faceComparison = {\r\n    access: allowAll,\r\n    fields: {\r\n        comparisonDate: timestamp({\r\n            defaultValue: { kind: 'now' }, // Fecha de comparaci\u00F3n por defecto\r\n            validation: { isRequired: true },\r\n        }),\r\n        imageCapturedURL: text(), // URL de la imagen capturada\r\n        confidenceScore: float({\r\n            validation: { isRequired: true }, // Nivel de confianza\r\n        }),\r\n        comparisonResult: select({\r\n            options: [\r\n                { label: 'Coincide', value: '1' },\r\n                { label: 'No coincide', value: '0' },\r\n            ],\r\n            defaultValue: '0',\r\n            ui: { displayMode: 'segmented-control' },\r\n        }),\r\n        attendance: relationship({\r\n            ref: 'Attendance', // Referencia a la lista de Attendance\r\n            many: false,\r\n        }),\r\n    },\r\n};\r\n", "import { integer, timestamp, text, select, relationship } from '@keystone-6/core/fields';\r\nimport { allowAll } from '@keystone-6/core/access';\r\n\r\nexport const accessRecord = {\r\n  access: allowAll,\r\n  fields: {\r\n    title: text({\r\n      validation: { isRequired: true },\r\n      isIndexed: 'unique', // Establece el campo como \u00FAnico en la base de datos\r\n    }),\r\n    accessType: select({\r\n      options: [\r\n        { label: 'Residente', value: 'resident' },\r\n        { label: 'Visitante', value: 'visitor' },\r\n        { label: 'Proveedor de servicios', value: 'service_provider' },\r\n      ],\r\n      validation: { isRequired: true }, // Campo requerido\r\n    }),\r\n    entryDateTime: timestamp({\r\n      validation: { isRequired: true },\r\n      defaultValue: { kind: 'now' }, // Establece la fecha y hora actuales por defecto\r\n    }),\r\n    exitDateTime: timestamp(), // Puede ser NULL, as\u00ED que no se establece un valor por defecto\r\n    personAccessing: relationship({\r\n      ref: 'User', // Referencia a la tabla User\r\n      many: false,\r\n    }),\r\n    // El campo authorizedBy ha sido eliminado como mencionaste.\r\n  },\r\n};\r\n", "import { type Lists } from '.keystone/types';\r\nimport { user } from './User';\r\nimport { authentication } from './Autentication';\r\nimport { azureADIntegration } from './AzureADIntegration';\r\nimport { recognitionLog } from \"./RecognitionLog\";\r\nimport { classSchema } from \"./Class\";\r\nimport { attendance } from \"./Attendance\";\r\nimport { faceComparison } from \"./FaceComparison\";\r\nimport { accessRecord } from \"./AccessRecord\";\r\n\r\nexport const lists = {\r\n    User: user,\r\n    Authentication: authentication,\r\n    AzureADIntegration: azureADIntegration,\r\n    RecognitionLog: recognitionLog,\r\n    Class: classSchema,\r\n    Attendance: attendance,\r\n    FaceComparison: faceComparison,\r\n    AccessRecord: accessRecord,\r\n}"],
  "mappings": "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",
  "names": ["import_fields", "import_access", "import_fields", "import_access", "import_fields", "import_access", "import_fields", "import_access", "import_fields", "import_access", "import_fields", "import_access", "import_fields", "import_access"]
}

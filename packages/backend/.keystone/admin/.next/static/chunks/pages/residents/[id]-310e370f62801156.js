(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{5346:function(e,t,i){"use strict";i.d(t,{C:function(){return r}});var n=i(6970),l=i(1053),o=i(6837);function r(e){return(0,l.tZ)(n.zx,{css:{textDecoration:"none",":hover":{color:"white"}},as:o.rU,href:`/${e.list.path}/create`,tone:"active",size:"small",weight:"bold"},"Create ",e.list.singular)}},210:function(e,t,i){"use strict";i.d(t,{G:function(){return r}});var n=i(1053),l=i(5581),o=i(1902);function r({errors:e,networkError:t}){return t?o.createElement(l.qX,{tone:"negative",marginBottom:"large"},t.message):null!=e&&e.length?o.createElement(n.Kq,{gap:"small",marginBottom:"large"},e.map((e,t)=>o.createElement(l.qX,{tone:"negative",key:t},e.message))):null}},8019:function(e,t,i){"use strict";i.d(t,{H:function(){return y},P:function(){return S}});var n=i(4390),l=i(1053),o=i(1902),r=i(5138),a=i(6653);i(6970),i(3660),i(2550),i(1770);var s=i(3029),d=i(6837),u=i(1596),c=i(3537),m=i.n(c);let g=()=>{var e;let{spacing:t}=(0,l.Fg)(),{adminConfig:i}=(0,s.jf)();return null!==(e=i.components)&&void 0!==e&&e.Logo?(0,l.tZ)(i.components.Logo,null):(0,l.tZ)(l.H3,null,(0,l.tZ)(m(),{href:"/",css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,l.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,l.tZ)("defs",null,(0,l.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,l.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,l.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,l.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6"))},f=({href:e,children:t,isSelected:i})=>{let{colors:n,palette:o,spacing:r,radii:s,typography:u}=(0,l.Fg)(),c=(0,a.useRouter)(),m=void 0!==i?i:c.pathname===e;return(0,l.tZ)("li",null,(0,l.tZ)(d.rU,{"aria-current":!!m&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:s.xsmall,borderTopRightRadius:s.xsmall,color:o.neutral700,display:"block",fontWeight:u.fontWeight.medium,marginBottom:r.xsmall,marginRight:r.xlarge,padding:`${r.small}px ${r.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:n.backgroundHover,color:n.linkHoverColor},"&[aria-current=location]":{background:o.neutral200,color:o.neutral900}}},t))},p=({item:e})=>{let{apiPath:t}=(0,s.jf)(),{spacing:i,typography:n}=(0,l.Fg)();return(0,l.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:i.xlarge,marginBottom:0}},!!e&&"authenticated"===e.state&&(0,l.tZ)("div",{css:{fontSize:n.fontSize.small}},"Signed in as ",(0,l.tZ)("strong",{css:{display:"block"}},e.label)),e&&"authenticated"===e.state&&(0,l.tZ)(u.S,null))},v=({authenticatedItem:e,children:t})=>{let{spacing:i}=(0,l.Fg)();return(0,l.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,l.tZ)(p,{item:e}),(0,l.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:i.xlarge}},(0,l.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},t)))},h=({list:e})=>{let t=(0,a.useRouter)();return(0,l.tZ)(f,{isSelected:t.pathname.split("/")[1]===`/${e.path}`.split("/")[1],href:`/${e.path}${e.isSingleton?"/1":""}`},e.label)},b=({lists:e=[],include:t=[]})=>{let i=t.length>0?e.filter(e=>t.includes(e.key)):e;return(0,l.tZ)(o.Fragment,null,i.map(e=>(0,l.tZ)(h,{key:e.key,list:e})))},Z=()=>{var e;let{adminMeta:{lists:t},adminConfig:i,authenticatedItem:n,visibleLists:o}=(0,s.jf)();if("loading"===o.state)return null;if("error"===o.state)return(0,l.tZ)(l.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},o.error instanceof Error?o.error.message:o.error[0].message);let r=Object.keys(t).map(e=>o.lists.has(e)?t[e]:null).filter(e=>!!e);return null!=i&&null!==(e=i.components)&&void 0!==e&&e.Navigation?(0,l.tZ)(i.components.Navigation,{authenticatedItem:n,lists:r}):(0,l.tZ)(v,{authenticatedItem:n},(0,l.tZ)(f,{href:"/"},"Dashboard"),(0,l.tZ)(b,{lists:r}))},y=80,w=e=>(0,l.tZ)(o.Fragment,null,(0,l.tZ)("style",null,"body { overflow: hidden; }"),(0,l.tZ)("div",(0,n.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr)",gridTemplateRows:`repeat(2,${y}px) auto`,height:"100vh",isolation:"isolate","@media (min-width: 576px)":{gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${y}px auto`}}},e))),x=({isSidebarOpen:e,...t})=>(0,l.tZ)("div",{css:{gridColumn:"1/2",gridRow:"2/4",display:e?"block":"none",height:"100vh","@media (min-width: 576px)":{gridColumn:"1/2",gridRow:"2/3",display:"block",height:"100%"},overflowY:"auto",WebkitOverflowScrolling:"touch"}},(0,l.tZ)("aside",(0,n.Z)({css:{minWidth:0,WebkitOverflowScrolling:"touch"}},t))),k=e=>{let{colors:t,spacing:i}=(0,l.Fg)();return(0,l.tZ)("main",(0,n.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:i.xlarge,paddingRight:i.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},S=({children:e,header:t,title:i})=>{let{colors:n,spacing:a}=(0,l.Fg)(),[s,d]=(0,o.useState)(!1);return(0,l.tZ)(w,null,(0,l.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",paddingLeft:a.xlarge,paddingRight:a.xlarge}},(0,l.tZ)(g,null),(0,l.tZ)("div",{onClick:()=>{d(!s)},css:{display:"block","@media (min-width: 576px)":{display:"none"}}},s?(0,l.tZ)(r.oOx,null):(0,l.tZ)(r.Oqj,null))),(0,l.tZ)("header",{css:{alignItems:"center",backgroundColor:n.background,borderBottom:`1px solid ${n.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:a.xlarge,paddingRight:a.xlarge,visibility:s?"hidden":"visible"}},(0,l.tZ)("title",null,i?`Keystone - ${i}`:"Keystone"),(0,l.tZ)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t),(0,l.tZ)(x,{isSidebarOpen:s},(0,l.tZ)(Z,null)),(0,l.tZ)(k,null,e))}},310:function(e,t,i){"use strict";i.d(t,{B:function(){return c},C:function(){return u},I:function(){return d}});var n=i(4390),l=i(1053),o=i(1770),r=i(1902),a=i(6837);let s=({children:e,...t})=>(0,l.tZ)("div",(0,n.Z)({css:{minWidth:0,maxWidth:1080}},t),e);function d(e){let{palette:t,spacing:i}=(0,l.Fg)();return(0,l.tZ)(s,{css:{alignItems:"center",display:"flex",flex:1,justifyContent:"space-between"}},(0,l.tZ)("div",{css:{alignItems:"center",display:"flex",flex:1,minWidth:0}},e.list.isSingleton?(0,l.tZ)(l.X6,{type:"h3"},e.list.label):(0,l.tZ)(r.Fragment,null,(0,l.tZ)(l.X6,{type:"h3"},(0,l.tZ)(a.rU,{href:`/${e.list.path}`,css:{textDecoration:"none"}},e.list.label)),(0,l.tZ)("div",{css:{color:t.neutral500,marginLeft:i.xsmall,marginRight:i.xsmall}},(0,l.tZ)(o.X,null)),(0,l.tZ)(l.X6,{as:"h1",type:"h3",css:{minWidth:0,maxWidth:"100%",overflow:"hidden",flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.label))))}function u(e){let{spacing:t}=(0,l.Fg)();return(0,l.tZ)(s,{css:{position:"relative",height:"100%"}},(0,l.tZ)("div",(0,n.Z)({css:{alignItems:"start",display:"grid",gap:t.none,gridTemplateColumns:"100vw","@media (min-width: 576px)":{gridTemplateColumns:"2fr 1fr",gap:t.xlarge}}},e)))}function c(e){let{colors:t,spacing:i}=(0,l.Fg)();return(0,l.tZ)("div",{css:{background:t.background,borderTop:`1px solid ${t.border}`,bottom:0,display:"flex",justifyContent:"space-between",marginTop:i.xlarge,paddingBottom:i.xlarge,paddingTop:i.xlarge,position:"sticky",zIndex:20}},e.children)}},3120:function(e,t,i){"use strict";i.d(t,{g:function(){return r}});var n,l,o=i(4667);let r=(n=e=>{let t=(0,o.Qc)(`fragment X on Y {
  id
  ${e.graphqlSelection}
  }`),i=new Set;return function e(t,i){i.selections.forEach(i=>{"Field"===i.kind&&t.add(i.alias?i.alias.value:i.name.value),"InlineFragment"===i.kind&&e(t,i.selectionSet)})}(i,t.definitions[0].selectionSet),[...i]},l=new WeakMap,function(e){if(l.has(e))return l.get(e);var t=n(e);return l.set(e,t),t})},1255:function(e,t,i){"use strict";i.d(t,{u:function(){return o}});var n=i(1902),l=i(6653);function o(e){let t=(0,l.useRouter)();(0,n.useEffect)(()=>{let i=()=>{if(e.current&&!window.confirm("There are unsaved changes, are you sure you want to exit?"))throw"Navigation cancelled by user"};t.events.on("routeChangeStart",i);let n=t=>{e.current&&t.preventDefault()};return window.addEventListener("beforeunload",n),()=>{t.events.off("routeChangeStart",i),window.removeEventListener("beforeunload",n)}},[e,t.events])}i(3537),i(5388)},9505:function(e){function t(){return new DOMException("The request is not allowed","NotAllowedError")}async function i(e){if(!navigator.clipboard)throw t();return navigator.clipboard.writeText(e)}async function n(e){let i=document.createElement("span");i.textContent=e,i.style.whiteSpace="pre",i.style.webkitUserSelect="auto",i.style.userSelect="all",document.body.appendChild(i);let n=window.getSelection(),l=window.document.createRange();n.removeAllRanges(),l.selectNode(i),n.addRange(l);let o=!1;try{o=window.document.execCommand("copy")}finally{n.removeAllRanges(),window.document.body.removeChild(i)}if(!o)throw t()}async function l(e){try{await i(e)}catch(i){try{await n(e)}catch(e){throw e||i||t()}}}e.exports=l},1565:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/residents/[id]",function(){return i(8461)}])},8461:function(e,t,i){"use strict";let n;i.r(t),i.d(t,{default:function(){return Y}});var l=i(4390),o=i(9505),r=i.n(o),a=i(6653),s=i(1902),d=i(6970),u=i(1053),c=i(6238),m=i(2129),g=i(9223),f=i(5581),p=i(5638),v=i(2165),h=i(2172);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Z=function(e,t){"object"===b(e)&&null!==e&&(e.current=t),"function"==typeof e&&e(t)},y=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){t.forEach(function(t){return Z(t,e)})}},w=i(3660);let x=["isVisible","children","arrow","weight"],k=e=>{let{children:t,content:i,hideOnClick:n=!0,placement:o="top",weight:r="bold"}=e,{spacing:a}=(0,u.Fg)(),d="bold"===r,{isOpen:c,setOpen:m,trigger:g,dialog:f,arrow:p}=(0,w.Sv)({placement:o,modifiers:[{name:"offset",options:{offset:[0,d?a.small:a.xsmall]}}]}),v=(0,u.Me)(),h=(0,s.useCallback)(()=>m(!0),[m]),b=(0,s.useCallback)(()=>m(!1),[m]),Z=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=Z.current;if(n&&e)return e.addEventListener("click",b),()=>e.removeEventListener("click",b)},[c,n,b]),(0,u.tZ)(s.Fragment,null,(0,s.useMemo)(()=>t({onMouseEnter:h,onMouseLeave:b,onFocus:h,onBlur:b,"aria-describedby":v,ref:y(g.ref,Z)}),[t,h,b,v,g.ref,Z]),(0,u.tZ)(S,(0,l.Z)({id:v,isVisible:c,weight:r,ref:f.ref},f.props,{arrow:"bold"===r?p:void 0}),i))},S=(0,s.memo)((0,s.forwardRef)((e,t)=>{let{isVisible:i,children:n,arrow:o,weight:r}=e,a=(0,h.Z)(e,x),s="bold"===r,{elevation:d,radii:c,colors:m,spacing:g,typography:f}=(0,u.Fg)(),p=C();return(0,u.tZ)(u.h_,null,(0,u.tZ)("div",(0,l.Z)({role:"tooltip","aria-hidden":!i,ref:t,css:(0,v.Z)({backgroundColor:m.foregroundMuted,borderRadius:c.xsmall,color:m.background,fontSize:s?f.fontSize.small:f.fontSize.xsmall,fontWeight:f.fontWeight.medium,lineHeight:f.leading.tight,maxWidth:320,opacity:i?s?1:.9:0,padding:s?`${g.small}px ${g.medium}px`:`${g.xsmall}px ${g.small}px`,pointerEvents:i?void 0:"none",zIndex:d.e500},p)},a),n,o&&(0,u.tZ)("div",(0,l.Z)({"data-popper-arrow":!0,ref:o.ref,className:"tooltipArrow"},o.props))))})),C=()=>{let{colors:e}=(0,u.Fg)();return{".tooltipArrow":{position:"absolute",overflow:"hidden",pointerEvents:"none",height:"20px",width:"20px","&::after":{content:"close-quote",position:"absolute",width:"10px",height:"10px",backgroundColor:e.foregroundMuted,transform:"translateX(-50%) translateY(-50%) rotate(45deg)"}},"&[data-popper-placement^='left'] > .tooltipArrow":{left:"100%","&::after":{top:"50%",left:"0"}},"&[data-popper-placement^='right'] > .tooltipArrow":{right:"100%","&::after":{top:"50%",left:"100%"}},"&[data-popper-placement^='top'] > .tooltipArrow":{top:"100%","&::after":{top:0,bottom:"-50%",left:"50%"}},"&[data-popper-placement^='bottom'] > .tooltipArrow":{bottom:"100%",right:"unset","&::after":{bottom:"-50%",left:"50%"}}}};var E=i(8613),F=i(4127),$=i(2497),M=i(3120),R=i(5500),z=i.n(R);function T(e,t){let i={};return Object.keys(e).forEach(n=>{let l=e[n],o={},r=new Set;for(let e of(0,M.g)(l.controller)){let i=t.get(e);i.errors&&i.errors.forEach(e=>{r.add(e)}),o[e]=i.data}r.size?i[n]={kind:"error",errors:[...r]}:i[n]={kind:"value",value:l.controller.deserialize(o)}}),i}function D(e,t){let i={};return Object.keys(e).map(n=>{let l=t[n];"value"===l.kind&&(i[n]=e[n].controller.serialize(l.value))}),i}var I=i(4854),N=i(2716),q=i(3696),L=i(3029),O=i(8019),j=i(210),W=i(1255),A=i(5346),P=i(310);function X(e){let t=(0,s.useRef)(e),i=(0,s.useCallback)((...e)=>t.current(...e),[]);return(0,s.useEffect)(()=>{t.current=e}),i}function B({listKey:e,itemGetter:t,selectedFields:i,fieldModes:n,fieldPositions:o,showDelete:a,item:c}){var g,f,v,h,b;let Z=(0,L.sm)(e),{spacing:y,typography:w}=(0,u.Fg)(),[x,{loading:S,error:C,data:M}]=(0,I.D)((0,N.Ps)`mutation ($data: ${Z.gqlNames.updateInputName}!, $id: ID!) {
      item: ${Z.gqlNames.updateMutationName}(where: { id: $id }, data: $data) {
        ${i}
      }
    }`,{errorPolicy:"all"});t=null!==(g=(0,s.useMemo)(()=>{if(M)return(0,F.m)(M,null==C?void 0:C.graphQLErrors).get("item")},[M,C]))&&void 0!==g?g:t;let[R,q]=(0,s.useState)(()=>({value:T(Z.fields,t),item:t}));!S&&R.item.data!==t.data&&(t.errors||[]).every(e=>{var t;return(null===(t=e.path)||void 0===t?void 0:t.length)!==1})&&q({value:T(Z.fields,t),item:t});let{changedFields:O,dataForUpdate:A}=function(e,t,i){let n=(0,s.useMemo)(()=>{let i=T(e,t);return D(e,i)},[e,t]),l=(0,s.useMemo)(()=>D(e,i),[i,e]);return(0,s.useMemo)(()=>{let t=new Set;Object.keys(l).forEach(e=>{z()(l[e],n[e])||t.add(e)});let i={};return t.forEach(e=>{Object.assign(i,l[e])}),Object.keys(l).filter(t=>{var i;return null===(i=e[t].graphql.isNonNull)||void 0===i?void 0:i.includes("update")}).filter(e=>!t.has(e)).forEach(e=>{Object.assign(i,l[e])}),{changedFields:t,dataForUpdate:i}},[l,n,e])}(Z.fields,R.item,R.value),P=(h=Z.fields,b=R.value,(0,s.useMemo)(()=>{let e=new Set;return Object.keys(b).forEach(t=>{let i=b[t];if("value"===i.kind){let n=h[t].controller.validate;n&&!1===n(i.value)&&e.add(t)}}),e},[h,b])),[B,V]=(0,s.useState)(!1),H=(0,p.e)(),Y=X(()=>{let e=0!==P.size;V(e),e||x({variables:{data:A,id:R.item.get("id").data}}).then(({errors:e})=>{let t=null==e?void 0:e.find(e=>{var t;return void 0===e.path||(null===(t=e.path)||void 0===t?void 0:t.length)===1});t?H.addToast({title:"Failed to update item",tone:"negative",message:t.message}):H.addToast({tone:"positive",title:"Saved successfully"})}).catch(e=>{H.addToast({title:"Failed to update item",tone:"negative",message:e.message})})}),G=Z.isSingleton?Z.label:null===(f=R.item.data)||void 0===f?void 0:f[Z.labelField],U=null===(v=R.item.data)||void 0===v?void 0:v.id,J=!!O.size;return(0,W.u)((0,s.useMemo)(()=>({current:J}),[J])),(0,u.tZ)(s.Fragment,null,(0,u.tZ)(u.xu,{marginTop:"xlarge"},(0,u.tZ)(j.G,{networkError:null==C?void 0:C.networkError,errors:null==C?void 0:C.graphQLErrors.filter(e=>{var t;return(null===(t=e.path)||void 0===t?void 0:t.length)===1})}),(0,u.tZ)($.F,{groups:Z.groups,fieldModes:n,fields:Z.fields,forceValidation:B,invalidFields:P,position:"form",fieldPositions:o,onChange:(0,s.useCallback)(e=>{q(t=>({item:t.item,value:e(t.value)}))},[q]),value:R.value}),(0,u.tZ)(K,{onSave:Y,hasChangedFields:!!O.size,onReset:X(()=>{q(e=>({item:e.item,value:T(Z.fields,e.item)}))}),loading:S,deleteButton:(0,s.useMemo)(()=>a?(0,u.tZ)(_,{list:Z,itemLabel:null!=G?G:U,itemId:U}):void 0,[a,Z,G,U])})),(0,u.tZ)(Q,null,(0,u.tZ)(E.Qy,null,"Item ID"),(0,u.tZ)("div",{css:{display:"flex",alignItems:"center"}},(0,u.tZ)(E.oi,{css:{marginRight:y.medium,fontFamily:w.fontFamily.monospace,fontSize:w.fontSize.small},readOnly:!0,value:c.id}),(0,u.tZ)(k,{content:"Copy ID"},e=>(0,u.tZ)(d.zx,(0,l.Z)({},e,{"aria-label":"Copy ID",onClick:()=>{r()(c.id)}}),(0,u.tZ)(m.K,{size:"small"})))),(0,u.tZ)(u.xu,{marginTop:"xlarge"},(0,u.tZ)($.F,{groups:Z.groups,fieldModes:n,fields:Z.fields,forceValidation:B,invalidFields:P,position:"sidebar",fieldPositions:o,onChange:(0,s.useCallback)(e=>{q(t=>({item:t.item,value:e(t.value)}))},[q]),value:R.value}))))}function _({itemLabel:e,itemId:t,list:i}){let n=(0,p.e)(),[l,{loading:o}]=(0,I.D)((0,N.Ps)`mutation ($id: ID!) {
      ${i.gqlNames.deleteMutationName}(where: { id: $id }) {
        id
      }
    }`,{variables:{id:t}}),[r,c]=(0,s.useState)(!1),m=(0,a.useRouter)();return(0,u.tZ)(s.Fragment,null,(0,u.tZ)(d.zx,{tone:"negative",onClick:()=>{c(!0)}},"Delete"),(0,u.tZ)(g.aR,{title:"Delete Confirmation",isOpen:r,tone:"negative",actions:{confirm:{label:"Delete",action:async()=>{try{await l()}catch(t){return n.addToast({title:`Failed to delete ${i.singular} item: ${e}`,message:t.message,tone:"negative"})}return m.push(i.isSingleton?"/":`/${i.path}`),n.addToast({title:e,message:`Deleted ${i.singular} item successfully`,tone:"positive"})},loading:o},cancel:{label:"Cancel",action:()=>{c(!1)}}}},"Are you sure you want to delete ",(0,u.tZ)("strong",null,e),"?"))}function V({listKey:e}){var t,i;let n=(0,L.sm)(e),l=(0,a.useRouter)().query.id,{query:o,selectedFields:r}=(0,s.useMemo)(()=>{let e=Object.entries(n.fields).filter(([e,t])=>"id"===e||"hidden"!==t.itemView.fieldMode).map(([e])=>n.fields[e].controller.graphqlSelection).join("\n");return{selectedFields:e,query:(0,N.Ps)`
        query ItemPage($id: ID!, $listKey: String!) {
          item: ${n.gqlNames.itemQueryName}(where: {id: $id}) {
            ${e}
          }
          keystone {
            adminMeta {
              list(key: $listKey) {
                hideCreate
                hideDelete
                fields {
                  path
                  itemView(id: $id) {
                    fieldMode
                    fieldPosition
                  }
                }
              }
            }
          }
        }
      `}},[n]),{data:d,error:m,loading:g}=(0,q.aM)(o,{variables:{id:l,listKey:e},errorPolicy:"all",skip:void 0===l}),p=(0,F.m)(d,null==m?void 0:m.graphQLErrors),v=(0,s.useMemo)(()=>{var e;let t={};return null===(e=p.data)||void 0===e||null===(e=e.keystone)||void 0===e||null===(e=e.adminMeta)||void 0===e||null===(e=e.list)||void 0===e||null===(e=e.fields)||void 0===e||e.forEach(e=>{var i;null!==e&&null!==e.path&&(null==e||null===(i=e.itemView)||void 0===i?void 0:i.fieldMode)!=null&&(t[e.path]=e.itemView.fieldMode)}),t},[null===(t=p.data)||void 0===t||null===(t=t.keystone)||void 0===t||null===(t=t.adminMeta)||void 0===t||null===(t=t.list)||void 0===t?void 0:t.fields]),h=(0,s.useMemo)(()=>{var e;let t={};return null===(e=p.data)||void 0===e||null===(e=e.keystone)||void 0===e||null===(e=e.adminMeta)||void 0===e||null===(e=e.list)||void 0===e||null===(e=e.fields)||void 0===e||e.forEach(e=>{var i;null!==e&&null!==e.path&&(null==e||null===(i=e.itemView)||void 0===i?void 0:i.fieldPosition)!=null&&(t[e.path]=e.itemView.fieldPosition)}),t},[null===(i=p.data)||void 0===i||null===(i=i.keystone)||void 0===i||null===(i=i.adminMeta)||void 0===i||null===(i=i.list)||void 0===i?void 0:i.fields]),b=g||void 0===l,Z=p.get("keystone").errors,y=n.isSingleton?n.label:b?void 0:d&&d.item&&(d.item[n.labelField]||d.item.id)||l;return(0,u.tZ)(O.P,{title:y,header:(0,u.tZ)(P.I,{list:n,label:b?"Loading...":d&&d.item&&(d.item[n.labelField]||d.item.id)||l})},b?(0,u.tZ)(u.M5,{css:{height:`calc(100vh - ${O.H}px)`}},(0,u.tZ)(c.xg,{label:"Loading item data",size:"large",tone:"passive"})):Z?(0,u.tZ)(u.xu,{marginY:"xlarge"},(0,u.tZ)(f.qX,{tone:"negative"},Z[0].message)):(0,u.tZ)(P.C,null,(null==d?void 0:d.item)==null?(0,u.tZ)(u.xu,{marginY:"xlarge"},null!=m&&m.graphQLErrors.length||null!=m&&m.networkError?(0,u.tZ)(j.G,{errors:null==m?void 0:m.graphQLErrors,networkError:null==m?void 0:m.networkError}):n.isSingleton?"1"===l?(0,u.tZ)(u.Kq,{gap:"medium"},(0,u.tZ)(f.qX,{tone:"negative"},n.label," doesn't exist or you don't have access to it."),!d.keystone.adminMeta.list.hideCreate&&(0,u.tZ)(A.C,{list:n})):(0,u.tZ)(f.qX,{tone:"negative"},'The item with id "',l,'" does not exist'):(0,u.tZ)(f.qX,{tone:"negative"},'The item with id "',l,"\" could not be found or you don't have access to it.")):(0,u.tZ)(s.Fragment,null,(0,u.tZ)(B,{fieldModes:v,fieldPositions:h,selectedFields:r,showDelete:!d.keystone.adminMeta.list.hideDelete,listKey:e,itemGetter:p.get("item"),item:d.item}))))}i(4123),i(5138),i(2550),i(1770),i(6837),i(3537),i(5388),i(1596);let K=(0,s.memo)(function({hasChangedFields:e,loading:t,onSave:i,onReset:n,deleteButton:l}){return(0,u.tZ)(P.B,null,(0,u.tZ)(d.zx,{isDisabled:!e,isLoading:t,weight:"bold",tone:"active",onClick:i},"Save changes"),(0,u.tZ)(u.Kq,{align:"center",across:!0,gap:"small"},e?(0,u.tZ)(H,{onReset:n}):(0,u.tZ)(u.xv,{weight:"medium",paddingX:"large",color:"neutral600"},"No changes"),l))});function H(e){let[t,i]=(0,s.useState)(!1);return(0,u.tZ)(s.Fragment,null,(0,u.tZ)(d.zx,{weight:"none",onClick:()=>{i(!0)}},"Reset changes"),(0,u.tZ)(g.aR,{actions:{confirm:{action:()=>e.onReset(),label:"Reset changes"},cancel:{action:()=>i(!1),label:"Cancel"}},isOpen:t,title:"Are you sure you want to reset changes?",tone:"negative"},null))}function Q(e){let{spacing:t}=(0,u.Fg)();return(0,u.tZ)("div",(0,l.Z)({css:{marginTop:t.xlarge,marginBottom:t.xxlarge,position:"sticky",top:t.xlarge}},e))}var Y=(n={listKey:"Resident"},()=>(0,u.tZ)(V,n))}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1565)}),_N_E=e.O()}]);
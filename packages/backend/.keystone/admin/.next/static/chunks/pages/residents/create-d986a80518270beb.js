(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{210:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(1053),i=n(5581),l=n(1902);function a({errors:e,networkError:t}){return t?l.createElement(i.qX,{tone:"negative",marginBottom:"large"},t.message):null!=e&&e.length?l.createElement(r.Kq,{gap:"small",marginBottom:"large"},e.map((e,t)=>l.createElement(i.qX,{tone:"negative",key:t},e.message))):null}},8019:function(e,t,n){"use strict";n.d(t,{H:function(){return b},P:function(){return C}});var r=n(4390),i=n(1053),l=n(1902),a=n(5138),o=n(6653);n(6970),n(3660),n(2550),n(1770);var s=n(3029),d=n(6837),u=n(1596),c=n(3537),g=n.n(c);let m=()=>{var e;let{spacing:t}=(0,i.Fg)(),{adminConfig:n}=(0,s.jf)();return null!==(e=n.components)&&void 0!==e&&e.Logo?(0,i.tZ)(n.components.Logo,null):(0,i.tZ)(i.H3,null,(0,i.tZ)(g(),{href:"/",css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,i.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,i.tZ)("defs",null,(0,i.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,i.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,i.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,i.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6"))},f=({href:e,children:t,isSelected:n})=>{let{colors:r,palette:l,spacing:a,radii:s,typography:u}=(0,i.Fg)(),c=(0,o.useRouter)(),g=void 0!==n?n:c.pathname===e;return(0,i.tZ)("li",null,(0,i.tZ)(d.rU,{"aria-current":!!g&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:s.xsmall,borderTopRightRadius:s.xsmall,color:l.neutral700,display:"block",fontWeight:u.fontWeight.medium,marginBottom:a.xsmall,marginRight:a.xlarge,padding:`${a.small}px ${a.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:r.backgroundHover,color:r.linkHoverColor},"&[aria-current=location]":{background:l.neutral200,color:l.neutral900}}},t))},p=({item:e})=>{let{apiPath:t}=(0,s.jf)(),{spacing:n,typography:r}=(0,i.Fg)();return(0,i.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:n.xlarge,marginBottom:0}},!!e&&"authenticated"===e.state&&(0,i.tZ)("div",{css:{fontSize:r.fontSize.small}},"Signed in as ",(0,i.tZ)("strong",{css:{display:"block"}},e.label)),e&&"authenticated"===e.state&&(0,i.tZ)(u.S,null))},h=({authenticatedItem:e,children:t})=>{let{spacing:n}=(0,i.Fg)();return(0,i.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,i.tZ)(p,{item:e}),(0,i.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:n.xlarge}},(0,i.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},t)))},v=({list:e})=>{let t=(0,o.useRouter)();return(0,i.tZ)(f,{isSelected:t.pathname.split("/")[1]===`/${e.path}`.split("/")[1],href:`/${e.path}${e.isSingleton?"/1":""}`},e.label)},Z=({lists:e=[],include:t=[]})=>{let n=t.length>0?e.filter(e=>t.includes(e.key)):e;return(0,i.tZ)(l.Fragment,null,n.map(e=>(0,i.tZ)(v,{key:e.key,list:e})))},x=()=>{var e;let{adminMeta:{lists:t},adminConfig:n,authenticatedItem:r,visibleLists:l}=(0,s.jf)();if("loading"===l.state)return null;if("error"===l.state)return(0,i.tZ)(i.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},l.error instanceof Error?l.error.message:l.error[0].message);let a=Object.keys(t).map(e=>l.lists.has(e)?t[e]:null).filter(e=>!!e);return null!=n&&null!==(e=n.components)&&void 0!==e&&e.Navigation?(0,i.tZ)(n.components.Navigation,{authenticatedItem:r,lists:a}):(0,i.tZ)(h,{authenticatedItem:r},(0,i.tZ)(f,{href:"/"},"Dashboard"),(0,i.tZ)(Z,{lists:a}))},b=80,w=e=>(0,i.tZ)(l.Fragment,null,(0,i.tZ)("style",null,"body { overflow: hidden; }"),(0,i.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr)",gridTemplateRows:`repeat(2,${b}px) auto`,height:"100vh",isolation:"isolate","@media (min-width: 576px)":{gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${b}px auto`}}},e))),y=({isSidebarOpen:e,...t})=>(0,i.tZ)("div",{css:{gridColumn:"1/2",gridRow:"2/4",display:e?"block":"none",height:"100vh","@media (min-width: 576px)":{gridColumn:"1/2",gridRow:"2/3",display:"block",height:"100%"},overflowY:"auto",WebkitOverflowScrolling:"touch"}},(0,i.tZ)("aside",(0,r.Z)({css:{minWidth:0,WebkitOverflowScrolling:"touch"}},t))),k=e=>{let{colors:t,spacing:n}=(0,i.Fg)();return(0,i.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},C=({children:e,header:t,title:n})=>{let{colors:r,spacing:o}=(0,i.Fg)(),[s,d]=(0,l.useState)(!1);return(0,i.tZ)(w,null,(0,i.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",paddingLeft:o.xlarge,paddingRight:o.xlarge}},(0,i.tZ)(m,null),(0,i.tZ)("div",{onClick:()=>{d(!s)},css:{display:"block","@media (min-width: 576px)":{display:"none"}}},s?(0,i.tZ)(a.oOx,null):(0,i.tZ)(a.Oqj,null))),(0,i.tZ)("header",{css:{alignItems:"center",backgroundColor:r.background,borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:o.xlarge,paddingRight:o.xlarge,visibility:s?"hidden":"visible"}},(0,i.tZ)("title",null,n?`Keystone - ${n}`:"Keystone"),(0,i.tZ)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t),(0,i.tZ)(y,{isSidebarOpen:s},(0,i.tZ)(x,null)),(0,i.tZ)(k,null,e))}},310:function(e,t,n){"use strict";n.d(t,{B:function(){return c},C:function(){return u},I:function(){return d}});var r=n(4390),i=n(1053),l=n(1770),a=n(1902),o=n(6837);let s=({children:e,...t})=>(0,i.tZ)("div",(0,r.Z)({css:{minWidth:0,maxWidth:1080}},t),e);function d(e){let{palette:t,spacing:n}=(0,i.Fg)();return(0,i.tZ)(s,{css:{alignItems:"center",display:"flex",flex:1,justifyContent:"space-between"}},(0,i.tZ)("div",{css:{alignItems:"center",display:"flex",flex:1,minWidth:0}},e.list.isSingleton?(0,i.tZ)(i.X6,{type:"h3"},e.list.label):(0,i.tZ)(a.Fragment,null,(0,i.tZ)(i.X6,{type:"h3"},(0,i.tZ)(o.rU,{href:`/${e.list.path}`,css:{textDecoration:"none"}},e.list.label)),(0,i.tZ)("div",{css:{color:t.neutral500,marginLeft:n.xsmall,marginRight:n.xsmall}},(0,i.tZ)(l.X,null)),(0,i.tZ)(i.X6,{as:"h1",type:"h3",css:{minWidth:0,maxWidth:"100%",overflow:"hidden",flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.label))))}function u(e){let{spacing:t}=(0,i.Fg)();return(0,i.tZ)(s,{css:{position:"relative",height:"100%"}},(0,i.tZ)("div",(0,r.Z)({css:{alignItems:"start",display:"grid",gap:t.none,gridTemplateColumns:"100vw","@media (min-width: 576px)":{gridTemplateColumns:"2fr 1fr",gap:t.xlarge}}},e)))}function c(e){let{colors:t,spacing:n}=(0,i.Fg)();return(0,i.tZ)("div",{css:{background:t.background,borderTop:`1px solid ${t.border}`,bottom:0,display:"flex",justifyContent:"space-between",marginTop:n.xlarge,paddingBottom:n.xlarge,paddingTop:n.xlarge,position:"sticky",zIndex:20}},e.children)}},3120:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r,i,l=n(4667);let a=(r=e=>{let t=(0,l.Qc)(`fragment X on Y {
  id
  ${e.graphqlSelection}
  }`),n=new Set;return function e(t,n){n.selections.forEach(n=>{"Field"===n.kind&&t.add(n.alias?n.alias.value:n.name.value),"InlineFragment"===n.kind&&e(t,n.selectionSet)})}(n,t.definitions[0].selectionSet),[...n]},i=new WeakMap,function(e){if(i.has(e))return i.get(e);var t=r(e);return i.set(e,t),t})},1255:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var r=n(1902),i=n(6653);function l(e){let t=(0,i.useRouter)();(0,r.useEffect)(()=>{let n=()=>{if(e.current&&!window.confirm("There are unsaved changes, are you sure you want to exit?"))throw"Navigation cancelled by user"};t.events.on("routeChangeStart",n);let r=t=>{e.current&&t.preventDefault()};return window.addEventListener("beforeunload",r),()=>{t.events.off("routeChangeStart",n),window.removeEventListener("beforeunload",r)}},[e,t.events])}n(3537),n(5388)},8719:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/residents/create",function(){return n(2523)}])},2523:function(e,t,n){"use strict";let r;n.r(t),n.d(t,{default:function(){return y}});var i=n(1053),l=n(6238),a=n(6970),o=n(6653),s=n(2497);n(3120);var d=n(1902),u=n(5500),c=n.n(u),g=n(8019),m=n(3029);n(3537),n(5388),n(2316),n(3660),n(2550),n(1770),n(1596),n(9223);var f=n(5638),p=n(4854),h=n(2716),v=n(1255),Z=n(210);n(8613),n(5138);var x=n(310);function b(e){var t,n;let r=function(e){let t=(0,f.e)(),{createViewFieldModes:n}=(0,m.jf)(),[r,{loading:i,error:l,data:a}]=(0,p.D)((0,h.Ps)`mutation($data: ${e.gqlNames.createInputName}!) {
      item: ${e.gqlNames.createMutationName}(data: $data) {
        id
        label: ${e.labelField}
      }
    }`),[o,s]=(0,d.useState)(()=>{let t={};return Object.keys(e.fields).forEach(n=>{t[n]={kind:"value",value:e.fields[n].controller.defaultValue}}),t}),u=(0,d.useMemo)(()=>{let t=new Set;return Object.keys(o).forEach(n=>{let r=o[n].value,i=e.fields[n].controller.validate;i&&!1===i(r)&&t.add(n)}),t},[e,o]),[g,Z]=(0,d.useState)(!1),x={};Object.keys(e.fields).forEach(t=>{let{controller:n}=e.fields[t],r=n.serialize(o[t].value);c()(r,n.serialize(n.defaultValue))||Object.assign(x,r)});let b=!(null!=a&&a.item)&&0!==Object.keys(x).length,w=(0,d.useRef)(b);return(0,d.useEffect)(()=>{w.current=b},[b]),(0,v.u)(w),{state:i?"loading":null!=a&&a.item?"editing":"created",shouldPreventNavigation:b,error:l,props:{fields:e.fields,groups:e.groups,fieldModes:"loaded"===n.state?n.lists[e.key]:null,forceValidation:g,invalidFields:u,value:o,onChange:(0,d.useCallback)(e=>{s(t=>e(t))},[])},async create(){let n;let i=0!==u.size;if(Z(i),i)return;try{n=await r({variables:{data:x},update(t,{data:n}){var r;"string"==typeof(null==n||null===(r=n.item)||void 0===r?void 0:r.id)&&t.evict({id:"ROOT_QUERY",fieldName:`${e.gqlNames.itemQueryName}(${JSON.stringify({where:{id:n.item.id}})})`})}}).then(e=>e.data)}catch{return}w.current=!1;let l=n.item.label||n.item.id;return t.addToast({title:l,message:"Created Successfully",tone:"positive"}),n.item}}}(e.list),l=(0,o.useRouter)();return(0,i.tZ)(i.xu,{paddingTop:"xlarge"},r.error&&(0,i.tZ)(Z.G,{networkError:null===(t=r.error)||void 0===t?void 0:t.networkError,errors:null===(n=r.error)||void 0===n?void 0:n.graphQLErrors}),(0,i.tZ)(s.F,r.props),(0,i.tZ)(x.B,null,(0,i.tZ)(a.zx,{isLoading:"loading"===r.state,weight:"bold",tone:"active",onClick:async()=>{let t=await r.create();t&&l.push(`/${e.list.path}/${t.id}`)}},"Create ",e.list.singular)))}function w(e){let t=(0,m.sm)(e.listKey),{createViewFieldModes:n}=(0,m.jf)();return(0,i.tZ)(g.P,{title:`Create ${t.singular}`,header:(0,i.tZ)(x.I,{list:t,label:"Create"})},(0,i.tZ)(x.C,null,(0,i.tZ)(i.xu,null,"error"===n.state&&(0,i.tZ)(Z.G,{networkError:n.error instanceof Error?n.error:void 0,errors:n.error instanceof Error?void 0:n.error}),"loading"===n.state&&(0,i.tZ)(l.xg,{label:"Loading create form"}),(0,i.tZ)(b,{list:t}))))}n(6837),n(4123),n(5581);var y=(r={listKey:"Resident"},()=>(0,i.tZ)(w,r))}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8719)}),_N_E=e.O()}]);
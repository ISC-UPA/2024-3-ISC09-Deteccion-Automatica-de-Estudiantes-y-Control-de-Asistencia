(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8019:function(e,t,n){"use strict";n.d(t,{H:function(){return x},P:function(){return C}});var r=n(4390),i=n(1053),o=n(1902),l=n(5138),a=n(6653);n(6970),n(3660),n(2550),n(1770);var s=n(3029),d=n(6837),c=n(1596),u=n(3537),g=n.n(u);let p=()=>{var e;let{spacing:t}=(0,i.Fg)(),{adminConfig:n}=(0,s.jf)();return null!==(e=n.components)&&void 0!==e&&e.Logo?(0,i.tZ)(n.components.Logo,null):(0,i.tZ)(i.H3,null,(0,i.tZ)(g(),{href:"/",css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,i.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,i.tZ)("defs",null,(0,i.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,i.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,i.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,i.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6"))},m=({href:e,children:t,isSelected:n})=>{let{colors:r,palette:o,spacing:l,radii:s,typography:c}=(0,i.Fg)(),u=(0,a.useRouter)(),g=void 0!==n?n:u.pathname===e;return(0,i.tZ)("li",null,(0,i.tZ)(d.rU,{"aria-current":!!g&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:s.xsmall,borderTopRightRadius:s.xsmall,color:o.neutral700,display:"block",fontWeight:c.fontWeight.medium,marginBottom:l.xsmall,marginRight:l.xlarge,padding:`${l.small}px ${l.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:r.backgroundHover,color:r.linkHoverColor},"&[aria-current=location]":{background:o.neutral200,color:o.neutral900}}},t))},h=({item:e})=>{let{apiPath:t}=(0,s.jf)(),{spacing:n,typography:r}=(0,i.Fg)();return(0,i.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:n.xlarge,marginBottom:0}},!!e&&"authenticated"===e.state&&(0,i.tZ)("div",{css:{fontSize:r.fontSize.small}},"Signed in as ",(0,i.tZ)("strong",{css:{display:"block"}},e.label)),e&&"authenticated"===e.state&&(0,i.tZ)(c.S,null))},f=({authenticatedItem:e,children:t})=>{let{spacing:n}=(0,i.Fg)();return(0,i.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,i.tZ)(h,{item:e}),(0,i.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:n.xlarge}},(0,i.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},t)))},v=({list:e})=>{let t=(0,a.useRouter)();return(0,i.tZ)(m,{isSelected:t.pathname.split("/")[1]===`/${e.path}`.split("/")[1],href:`/${e.path}${e.isSingleton?"/1":""}`},e.label)},Z=({lists:e=[],include:t=[]})=>{let n=t.length>0?e.filter(e=>t.includes(e.key)):e;return(0,i.tZ)(o.Fragment,null,n.map(e=>(0,i.tZ)(v,{key:e.key,list:e})))},b=()=>{var e;let{adminMeta:{lists:t},adminConfig:n,authenticatedItem:r,visibleLists:o}=(0,s.jf)();if("loading"===o.state)return null;if("error"===o.state)return(0,i.tZ)(i.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},o.error instanceof Error?o.error.message:o.error[0].message);let l=Object.keys(t).map(e=>o.lists.has(e)?t[e]:null).filter(e=>!!e);return null!=n&&null!==(e=n.components)&&void 0!==e&&e.Navigation?(0,i.tZ)(n.components.Navigation,{authenticatedItem:r,lists:l}):(0,i.tZ)(f,{authenticatedItem:r},(0,i.tZ)(m,{href:"/"},"Dashboard"),(0,i.tZ)(Z,{lists:l}))},x=80,y=e=>(0,i.tZ)(o.Fragment,null,(0,i.tZ)("style",null,"body { overflow: hidden; }"),(0,i.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr)",gridTemplateRows:`repeat(2,${x}px) auto`,height:"100vh",isolation:"isolate","@media (min-width: 576px)":{gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${x}px auto`}}},e))),k=({isSidebarOpen:e,...t})=>(0,i.tZ)("div",{css:{gridColumn:"1/2",gridRow:"2/4",display:e?"block":"none",height:"100vh","@media (min-width: 576px)":{gridColumn:"1/2",gridRow:"2/3",display:"block",height:"100%"},overflowY:"auto",WebkitOverflowScrolling:"touch"}},(0,i.tZ)("aside",(0,r.Z)({css:{minWidth:0,WebkitOverflowScrolling:"touch"}},t))),w=e=>{let{colors:t,spacing:n}=(0,i.Fg)();return(0,i.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:n.xlarge,paddingRight:n.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},C=({children:e,header:t,title:n})=>{let{colors:r,spacing:a}=(0,i.Fg)(),[s,d]=(0,o.useState)(!1);return(0,i.tZ)(y,null,(0,i.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",paddingLeft:a.xlarge,paddingRight:a.xlarge}},(0,i.tZ)(p,null),(0,i.tZ)("div",{onClick:()=>{d(!s)},css:{display:"block","@media (min-width: 576px)":{display:"none"}}},s?(0,i.tZ)(l.oOx,null):(0,i.tZ)(l.Oqj,null))),(0,i.tZ)("header",{css:{alignItems:"center",backgroundColor:r.background,borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:a.xlarge,paddingRight:a.xlarge,visibility:s?"hidden":"visible"}},(0,i.tZ)("title",null,n?`Keystone - ${n}`:"Keystone"),(0,i.tZ)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t),(0,i.tZ)(k,{isSidebarOpen:s},(0,i.tZ)(b,null)),(0,i.tZ)(w,null,e))}},3120:function(e,t,n){"use strict";n.d(t,{g:function(){return l}});var r,i,o=n(4667);let l=(r=e=>{let t=(0,o.Qc)(`fragment X on Y {
  id
  ${e.graphqlSelection}
  }`),n=new Set;return function e(t,n){n.selections.forEach(n=>{"Field"===n.kind&&t.add(n.alias?n.alias.value:n.name.value),"InlineFragment"===n.kind&&e(t,n.selectionSet)})}(n,t.definitions[0].selectionSet),[...n]},i=new WeakMap,function(e){if(i.has(e))return i.get(e);var t=r(e);return i.set(e,t),t})},8509:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6417)}])},6417:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n(4390),i=n(1902),o=n(1053),l=n(4443),a=n(6238),s=n(4127);n(2497),n(3120),n(5500);var d=n(8019),c=n(2716),u=n(3696),g=n(3029),p=n(6837);function m({listKey:e,count:t,hideCreate:n}){let{colors:r,palette:i,radii:s,spacing:d}=(0,o.Fg)(),c=(0,g.sm)(e);return(0,o.tZ)("div",{css:{position:"relative"}},(0,o.tZ)(p.rU,{href:`/${c.path}${c.isSingleton?"/1":""}`,css:{backgroundColor:r.background,borderColor:r.border,borderRadius:s.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:d.large,textDecoration:"none",":hover":{borderColor:i.blue400},":hover h3":{textDecoration:"underline"}}},(0,o.tZ)("h3",{css:{margin:`0 0 ${d.small}px 0`}},c.label," "),c.isSingleton?null:"success"===t.type?(0,o.tZ)("span",{css:{color:r.foreground,textDecoration:"none"}},t.count," item",1!==t.count?"s":""):"error"===t.type?t.message:"loading"===t.type?(0,o.tZ)(a.xg,{label:`Loading count of ${c.plural}`,size:"small",tone:"passive"}):"No access"),!1===n&&!c.isSingleton&&(0,o.tZ)(h,{title:`Create ${c.singular}`,href:`/${c.path}/create`},(0,o.tZ)(l.p,{size:"large"}),(0,o.tZ)(o.TX,null,"Create ",c.singular)))}function h(e){let t=(0,o.Fg)();return(0,o.tZ)(p.rU,(0,r.Z)({css:{alignItems:"center",backgroundColor:t.palette.neutral400,border:0,borderRadius:t.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:t.spacing.large,top:t.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{color:"white",backgroundColor:t.tones.positive.fill[0]}}},e))}function f(){let{adminMeta:{lists:e},visibleLists:t}=(0,g.jf)(),n=(0,i.useMemo)(()=>(0,c.Ps)`
    query {
      keystone {
        adminMeta {
          lists {
            key
            hideCreate
          }
        }
      }
      ${Object.values(e).filter(e=>!e.isSingleton).map(e=>`${e.key}: ${e.gqlNames.listQueryCountName}`).join("\n")}
    }`,[e]),{data:r,error:l}=(0,u.aM)(n,{errorPolicy:"all"}),p=(0,s.m)(r,null==l?void 0:l.graphQLErrors);return(0,o.tZ)(d.P,{header:(0,o.tZ)(o.X6,{type:"h3"},"Dashboard")},"loading"===t.state?(0,o.tZ)(o.M5,{css:{height:`calc(100vh - ${d.H}px)`}},(0,o.tZ)(a.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,o.tZ)(o.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===t.state?(0,o.tZ)("span",{css:{color:"red"}},t.error instanceof Error?t.error.message:t.error[0].message):Object.keys(e).map(e=>{var n,i;if(!t.lists.has(e))return null;let l=p.get(e);return(0,o.tZ)(m,{count:r?l.errors?{type:"error",message:l.errors[0].message}:{type:"success",count:r[e]}:{type:"loading"},hideCreate:null!==(n=null==r||null===(i=r.keystone.adminMeta.lists.find(t=>t.key===e))||void 0===i?void 0:i.hideCreate)&&void 0!==n&&n,key:e,listKey:e})})))}n(8613),n(6970),n(5138),n(6653),n(3660),n(2550),n(1770),n(1596),n(3537),n(5638),n(9223),n(4123),n(5388)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8509)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[233],{2233:function(e,t,i){"use strict";i.d(t,{d:function(){return ed}});var r=i(4390),n=i(1902),o=i(6970),l=i(1053),s=i(8613),a=i(1564),u=i(6238),d=i(9223),c=i(5638),f=i(543),h=i(4127);i(2497);var g=i(3120);i(5500);var p=i(2716),m=i(3696),b=i(4854),v=i(7012);i(2316),i(3537);var y=i(3029),Z=i(6653),w=i(3660);i(2550);var k=i(1770),x=i(6837);i(1596);var S=i(8019),C=i(210),_=i(5138);function I({singular:e,plural:t,pageSize:i,currentPage:r,total:n}){let o="";if(n>i){let e=i*(r-1)+1;o=`${e} - ${Math.min(e+i-1,n)} of ${n} ${t}`}else n>1&&t?o=`${n} ${t}`:1===n&&e&&(o=`${n} ${e}`);return{stats:o}}function $({currentPage:e,total:t,pageSize:i,singular:r,plural:o}){let{query:a,pathname:u,push:d}=(0,Z.useRouter)(),{stats:c}=I({singular:r,plural:o,currentPage:e,total:t,pageSize:i}),{opacity:f}=(0,l.Fg)(),h=e+1,g=e-1,p={...a,page:h},m={...a,page:g},b=Math.ceil(t/i),v=[];if((0,n.useEffect)(()=>{e>Math.ceil(t/i)&&d({pathname:u,query:{...a,page:Math.ceil(t/i)}})},[t,i,e,u,a,d]),t<=i)return null;for(let e=1;e<=b;e++)v.push({label:String(e),value:String(e)});return(0,l.tZ)(l.Kq,{as:"nav",role:"navigation","aria-label":"Pagination",paddingLeft:"medium",paddingRight:"medium",paddingTop:"large",paddingBottom:"large",across:!0,align:"center",css:{width:"100%",justifyContent:"space-between"}},(0,l.tZ)(l.Kq,{across:!0,gap:"xxlarge",align:"center"},(0,l.tZ)("span",null,`${o} per page: ${i}`),(0,l.tZ)("span",null,(0,l.tZ)("strong",null,c))),(0,l.tZ)(l.Kq,{gap:"medium",across:!0,align:"center"},(0,l.tZ)(s.Ph,{width:"medium",value:{label:String(e),value:String(e)},options:v,styles:{valueContainer:e=>({...e,paddingLeft:"12px",paddingRight:"16px"})},menuPortalTarget:document.body,onChange:e=>{d({pathname:u,query:{...a,page:e.value}})}}),(0,l.tZ)("span",null,"of ",b),(0,l.tZ)(x.rU,{"aria-label":"Previous page",css:{color:"#415269",...g<1&&{pointerEvents:"none",opacity:f.disabled}},href:{query:m}},(0,l.tZ)(_.wyc,null)),(0,l.tZ)(x.rU,{"aria-label":"Next page",css:{color:"#415269",...h>b&&{pointerEvents:"none",opacity:f.disabled}},href:{query:p}},(0,l.tZ)(_.XCv,null))))}function R({currentPage:e,pageSize:t,plural:i,singular:r,total:n}){let{stats:o}=I({plural:i,singular:r,currentPage:e,total:n,pageSize:t});return n?(0,l.tZ)("span",null,"Showing ",(0,l.tZ)("strong",null,o)):(0,l.tZ)("span",null,"No ",i)}i(6489);var E=i(5346),T=i(2692),M=i(2165),F=i(2172),q=i(4682),O=i(3086),z=i(6349);let N=["selectProps"],D=["components"],L=e=>{let{isDisabled:t,isFocused:i,isSelected:r}=e,n=(0,s.sF)({size:"medium",type:"radio"});return(0,l.tZ)("div",{className:`${t?"disabled ":""}${i?"focus ":""}${r?"selected":""}`,css:{alignItems:"center",backgroundColor:n.background,borderColor:n.borderColor,borderRadius:n.borderRadius,borderStyle:"solid",borderWidth:n.borderWidth,boxSizing:"border-box",color:n.foreground,cursor:"pointer",display:"flex",flexShrink:0,height:n.boxSize,justifyContent:"center",transition:n.transition,width:n.boxSize,"&.focus":{backgroundColor:n.focus.background,borderColor:n.focus.borderColor,boxShadow:n.focus.shadow,color:n.focus.foreground},"&.selected":{backgroundColor:n.selected.background,borderColor:n.selected.borderColor,boxShadow:n.selected.shadow,color:n.selected.foreground},"&.disabled":{backgroundColor:n.disabled.background,borderColor:n.disabled.borderColor,boxShadow:n.disabled.shadow,color:n.disabled.background,cursor:"default"},"&.selected.disabled":{color:n.disabled.foreground}}},(0,l.tZ)(q.n,{size:"small"}))},j=e=>{let{children:t,isDisabled:i,isFocused:n,innerProps:o,innerRef:s,className:a}=e,u=(0,l.Fg)();return(0,l.tZ)("div",(0,r.Z)({ref:s,className:a,css:{alignItems:"center",color:i?u.colors.foregroundDim:n?u.colors.linkHoverColor:void 0,cursor:"pointer",display:"flex",fontSize:"0.9em",fontWeight:500,justifyContent:"space-between",background:n?u.colors.backgroundHover:void 0,outline:0,padding:`${u.spacing.small}px`,pointerEvents:i?"none":void 0,"&:not(:first-of-type)":{borderTop:`1px solid ${u.colors.backgroundDim}`},":hover":{background:u.colors.backgroundHover,color:u.colors.linkHoverColor}}},o),t)},B={Control:e=>{let{selectProps:t}=e,i=(0,F.Z)(e,N);return(0,l.tZ)(O.c.Control,(0,r.Z)({selectProps:t},i))},Option:j,DropdownIndicator:null,IndicatorSeparator:null},P=e=>{let{components:t}=e,i=(0,F.Z)(e,D),o=(0,n.useMemo)(()=>(0,M.Z)((0,M.Z)({},B),t),[t]),s=(0,l.Fg)(),a=(0,n.useMemo)(()=>({control:e=>(0,M.Z)((0,M.Z)({},e),{},{background:s.fields.inputBackground,boxShadow:"none",cursor:"text",padding:0,minHeight:34}),menu:()=>({marginTop:8}),menuList:e=>(0,M.Z)((0,M.Z)({},e),{},{padding:0}),placeholder:e=>(0,M.Z)((0,M.Z)({},e),{},{color:s.fields.inputPlaceholder})}),[s]);return(0,l.tZ)(z.ZP,(0,r.Z)({backspaceRemovesValue:!1,captureMenuScroll:!1,closeMenuOnSelect:!1,controlShouldRenderValue:!1,hideSelectedOptions:!1,isClearable:!1,isSearchable:!0,maxMenuHeight:1e3,menuIsOpen:!0,menuShouldScrollIntoView:!1,styles:a,tabSelectsValue:!1,components:o},i))};i(5388);var W=i(234),V=i(3601);let A=["tone","weight","onClick","tabIndex"],H=["weight","tone","containerProps","children","onClick","onRemove"],U=(0,n.forwardRef)((e,t)=>{let{tone:i,weight:n,onClick:o,tabIndex:s}=e,a=(0,F.Z)(e,A),{radii:u,spacing:d,tones:c,typography:f}=(0,l.Fg)(),h=!!o,g=c[i],p={bold:{background:g.fill[0],foreground:g.fillForeground[0],focus:{shadow:`0 0 0 2px ${g.focusRing}`},hover:{background:g.fill[1]},active:{background:g.fill[2]}},light:{background:g.tint[0],foreground:g.foreground[0],focus:{shadow:`0 0 0 2px ${g.focusRing}`},hover:{foreground:g.foreground[1],background:g.tint[1]},active:{foreground:g.foreground[2],background:g.tint[2]}}}[n],m={alignItems:"center",appearance:"none",background:"none",backgroundColor:p.background,border:0,color:p.foreground,display:"flex",fontSize:f.fontSize.small,fontWeight:f.fontWeight.medium,justifyContent:"center",maxWidth:"100%",minWidth:1,outline:0,padding:`${d.small}px ${d.medium}px`,":first-of-type":{paddingRight:d.small,borderTopLeftRadius:u.full,borderBottomLeftRadius:u.full,marginRight:1},":last-of-type":{paddingLeft:d.small,borderTopRightRadius:u.full,borderBottomRightRadius:u.full},":only-of-type":{paddingLeft:d.medium,paddingRight:d.medium}},b=h?{cursor:"pointer",":focus":{boxShadow:p.focus.shadow},":hover,:focus":{backgroundColor:p.hover.background,color:p.hover.foreground},":active":{backgroundColor:p.active.background,color:p.active.foreground}}:{};return(0,l.tZ)("button",(0,r.Z)({ref:t,css:(0,M.Z)((0,M.Z)({},m),b),onClick:o,tabIndex:h?s:-1},a))}),K=(0,n.forwardRef)((e,t)=>{let{weight:i="bold",tone:n="active",containerProps:o,children:s,onClick:a,onRemove:u}=e,d=(0,F.Z)(e,H);return(0,l.tZ)("div",(0,r.Z)({css:{display:"flex"}},o),(0,l.tZ)(U,(0,r.Z)({ref:t,weight:i,tone:n,onClick:a},d),s),u?(0,l.tZ)(U,{"aria-label":"remove pill",weight:i,tone:n,onClick:u},(0,l.tZ)(V.b,{css:{height:14,width:14}})):null)});function X(e,t){let{query:i}=(0,Z.useRouter)(),r="string"==typeof i.fields?i.fields:"";return(0,n.useMemo)(()=>{let i=(r?r.split(","):e.initialColumns).filter(e=>"read"===t[e]);return new Set(0===i.length?[e.labelField]:i)},[e,r,t])}i(4123),i(5581);let J={Option:e=>(0,l.tZ)(j,e,e.children,(0,l.tZ)(L,{isDisabled:e.isDisabled,isFocused:e.isFocused,isSelected:e.isSelected}))};function Q({list:e,fieldModesByFieldPath:t}){let i=(0,Z.useRouter)(),n=X(e,t),s=t=>{if(function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(t,e.initialColumns)){let{fields:e,...t}=i.query;i.push({query:t})}else i.push({query:{...i.query,fields:t.join(",")}})},a=[];return Object.keys(t).forEach(i=>{"read"===t[i]&&a.push({value:i,label:e.fields[i].label,isDisabled:1===n.size&&n.has(i)})}),(0,l.tZ)(w.J2,{"aria-label":`Columns options, list of column options to apply to the ${e.key} list`,triggerRenderer:({triggerProps:e})=>(0,l.tZ)(o.zx,(0,r.Z)({weight:"link",css:{padding:4}},e),(0,l.tZ)("span",{css:{display:"inline-flex",justifyContent:"center",alignItems:"center"}},n.size," column",1===n.size?"":"s"," ",(0,l.tZ)(T.v,{size:"smallish"})))},(0,l.tZ)("div",{css:{width:320}},(0,l.tZ)(l.xu,{padding:"medium"},(0,l.tZ)(P,{onChange:e=>{Array.isArray(e)&&s(e.map(e=>e.value))},isMulti:!0,value:a.filter(e=>n.has(e.value)),options:a,components:J}))))}let G={Option:({children:e,...t})=>{let i=(0,l.Fg)(),r=t.isFocused?i.colors.foreground:i.colors.foregroundDim;return(0,l.tZ)(j,t,(0,l.tZ)("span",null,e),(0,l.tZ)("div",{css:{alignItems:"center",display:"flex",height:24,justifyContent:"center",width:24}},(0,l.tZ)(k.X,{css:{color:r}})))}};function Y({listKey:e,filterableFields:t}){let{isOpen:i,setOpen:s,trigger:a,dialog:u,arrow:d}=(0,w.Sv)({placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,8]}}]});return(0,l.tZ)(n.Fragment,null,(0,l.tZ)(o.zx,(0,r.Z)({tone:"active"},a.props,{ref:a.ref,onClick:()=>s(!i)}),(0,l.tZ)(l.xu,{as:"span",marginRight:"xsmall"},"Filter List"),(0,l.tZ)(T.v,{size:"small"})),(0,l.tZ)(w.c1,(0,r.Z)({"aria-label":`Filters options, list of filters to apply to the ${e} list`,arrow:d,isVisible:i},u.props,{ref:u.ref}),i&&(0,l.tZ)(ee,{onClose:()=>{s(!1)},listKey:e,filterableFields:t})))}function ee({onClose:e,listKey:t,filterableFields:i}){let r=(0,y.sm)(t),a=(0,Z.useRouter)(),u=(0,n.useMemo)(()=>{let e={};return Object.keys(r.fields).forEach(t=>{let n=r.fields[t];i.has(t)&&n.controller.filter&&(e[t]=n)}),e},[r.fields,i]),d=(0,n.useMemo)(()=>{let e={};return Object.keys(u).forEach(t=>{let i=u[t],r=!1,n={};Object.keys(i.controller.filter.types).forEach(e=>{void 0===a.query[`!${t}_${e}`]&&(r=!0,n[e]=i.controller.filter.types[e].label)}),r&&(e[t]=n)}),e},[a.query,u]),[c,f]=(0,n.useState)({kind:"selecting-field"});return(0,l.tZ)(l.Kq,{padding:"medium",as:"form",css:{minWidth:320},onSubmit:t=>{t.preventDefault(),"filter-value"===c.kind&&(a.push({query:{...a.query,[`!${c.fieldPath}_${c.filterType}`]:JSON.stringify(c.filterValue)}}),e())},gap:"small"},(0,l.tZ)("div",{css:{position:"relative"}},"selecting-field"!==c.kind&&(0,l.tZ)("button",{type:"button",onClick:()=>{f({kind:"selecting-field"})},css:{border:0,background:"transparent",cursor:"pointer",position:"absolute"}},(0,l.tZ)(l.TX,null,"Back"),(0,l.tZ)(W.w,{size:"smallish"})),(0,l.tZ)(l.X6,{textAlign:"center",type:"h5"},(()=>{switch(c.kind){case"selecting-field":return"Filter";case"filter-value":return r.fields[c.fieldPath].label}})())),(0,l.tZ)(l.iz,null),"selecting-field"===c.kind&&(0,l.tZ)(P,{components:G,onChange:e=>{let t=e.value,i=Object.keys(d[t])[0];f({kind:"filter-value",fieldPath:t,filterType:i,filterValue:u[t].controller.filter.types[i].initialValue})},options:Object.keys(d).map(e=>({label:u[e].label,value:e}))}),"filter-value"===c.kind&&(0,l.tZ)(s.Ph,{width:"full",value:{value:c.filterType,label:d[c.fieldPath][c.filterType]},onChange:e=>{e&&f({kind:"filter-value",fieldPath:c.fieldPath,filterValue:u[c.fieldPath].controller.filter.types[e.value].initialValue,filterType:e.value})},options:Object.keys(d[c.fieldPath]).map(e=>({label:d[c.fieldPath][e],value:e}))}),"filter-value"==c.kind&&(()=>{let{Filter:e}=u[c.fieldPath].controller.filter;return(0,l.tZ)(e,{type:c.filterType,value:c.filterValue,onChange:e=>{f(t=>({...t,filterValue:e}))}})})(),"filter-value"==c.kind&&(0,l.tZ)("div",{css:{display:"flex",justifyContent:"space-between"}},(0,l.tZ)(o.zx,{onClick:e},"Cancel"),(0,l.tZ)(o.zx,{type:"submit"},"Apply")))}function et({filters:e,list:t}){return(0,l.tZ)(l.gF,{gap:"small"},e.map(e=>{let i=t.fields[e.field];return(0,l.tZ)(ei,{key:`${e.field}_${e.type}`,field:i,filter:e})}))}function ei({filter:e,field:t}){let i=(0,Z.useRouter)(),{isOpen:o,setOpen:s,trigger:a,dialog:u,arrow:d}=(0,w.Sv)({placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),c=t.controller.filter.Label;return(0,l.tZ)(n.Fragment,null,(0,l.tZ)(K,(0,r.Z)({containerProps:{"aria-label":`Filter item ${e.field}, press to edit filter`}},a.props,{ref:a.ref,onClick:()=>s(!o),weight:"light",tone:"passive",onRemove:()=>{let{[`!${e.field}_${e.type}`]:t,...r}=i.query;i.push({pathname:i.pathname,query:r})}}),t.label," ",(0,l.tZ)(c,{label:t.controller.filter.types[e.type].label,type:e.type,value:e.value})),(0,l.tZ)(w.c1,(0,r.Z)({"aria-label":`filter item config, dialog for configuring ${e.field} filter`,arrow:d},u.props,{isVisible:o,ref:u.ref}),o&&(0,l.tZ)(er,{onClose:()=>{s(!1)},field:t,filter:e})))}function er({filter:e,field:t,onClose:i}){let r=t.controller.filter.Filter,s=(0,Z.useRouter)(),[a,u]=(0,n.useState)(e.value);return(0,l.tZ)(l.Kq,{as:"form",padding:"small",gap:"small",onSubmit:t=>{t.preventDefault(),s.push({query:{...s.query,[`!${e.field}_${e.type}`]:JSON.stringify(a)}}),i()}},(0,l.tZ)(r,{type:e.type,value:a,onChange:u}),(0,l.tZ)("div",{css:{display:"flex",justifyContent:"space-between"}},(0,l.tZ)(o.zx,{onClick:i},"Cancel"),(0,l.tZ)(o.zx,{type:"submit"},"Save")))}function en(e,t){let{query:i}=(0,Z.useRouter)(),r="string"==typeof i.sortBy?i.sortBy:null;return(0,n.useMemo)(()=>{if(""===r)return null;if(null===r)return e.initialSort;if(r.startsWith("-")){let e=r.slice(1);return t.has(e)?{field:e,direction:"DESC"}:null}return t.has(r)?{field:r,direction:"ASC"}:null},[r,e,t])}function eo({list:e,orderableFields:t}){let i=en(e,t),{isOpen:s,setOpen:a,trigger:u,dialog:d,arrow:c}=(0,w.Sv)({placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,8]}}]});return(0,l.tZ)(n.Fragment,null,(0,l.tZ)(o.zx,(0,r.Z)({},u.props,{weight:"link",css:{padding:4},ref:u.ref,onClick:()=>a(!s)}),(0,l.tZ)("span",{css:{display:"inline-flex",justifyContent:"center",alignItems:"center"}},i?`${e.fields[i.field].label} ${({ASC:"ascending",DESC:"descending"})[i.direction]}`:"No field",(0,l.tZ)(T.v,{size:"smallish"}))),(0,l.tZ)(w.c1,(0,r.Z)({"aria-label":`Sort options, list of sorting parameters to apply to the ${e.key} list`,arrow:c,isVisible:s},d.props,{ref:d.ref}),s&&(0,l.tZ)(es,{onClose:()=>{a(!1)},list:e,orderableFields:t})))}let el={label:"No field",value:"___________NO_FIELD___________"};function es({onClose:e,list:t,orderableFields:i}){let r=en(t,i),n=(0,Z.useRouter)();return(0,l.tZ)(l.Kq,{padding:"medium",css:{minWidth:320},gap:"small"},(0,l.tZ)("div",{css:{position:"relative"}},(0,l.tZ)(l.X6,{textAlign:"center",type:"h5"},"Sort")),(0,l.tZ)(l.iz,null),(0,l.tZ)(P,{value:r?{label:t.fields[r.field].label,value:r.field}:el,components:J,onChange:i=>{let o=i.value;if(o===el.value){let{sortBy:e,...i}=n.query;t.initialSort?n.push({query:{...n.query,sortBy:""}}):n.push({query:i})}else n.push({query:{...n.query,sortBy:(null==r?void 0:r.field)===o&&"ASC"===r.direction?`-${r.field}`:o}});e()},options:[...i].map(e=>({label:t.fields[e].label,value:e})).concat(el)}))}let ea=(0,p.Ps)`
  query ($listKey: String!) {
    keystone {
      adminMeta {
        list(key: $listKey) {
          hideDelete
          hideCreate
          fields {
            path
            isOrderable
            isFilterable
            listView {
              fieldMode
            }
          }
        }
      }
    }
  }
`,eu=["sortBy","fields"],ed=e=>()=>(0,l.tZ)(ec,e);function ec({listKey:e}){var t,i,r;let a=(0,y.sm)(e),{query:d,push:c}=(0,Z.useRouter)(),{resetToDefaults:g}=function(e){let t=(0,Z.useRouter)(),i=`keystone.list.${e}.list.page.info`;return(0,n.useEffect)(()=>{if(!Object.keys(t.query).some(e=>e.startsWith("!")||eu.includes(e))&&t.isReady){let e;let r=localStorage.getItem(i);try{e=JSON.parse(r)}catch(e){}e&&t.replace({query:{...t.query,...e}})}},[i,t.isReady]),(0,n.useEffect)(()=>{let e={};Object.keys(t.query).forEach(i=>{(i.startsWith("!")||eu.includes(i))&&(e[i]=t.query[i])}),Object.keys(e).length?localStorage.setItem(i,JSON.stringify(e)):localStorage.removeItem(i)},[i,t]),{resetToDefaults:()=>{localStorage.removeItem(i),t.replace({pathname:t.pathname})}}}(e),{currentPage:b,pageSize:v}=function({defaultPageSize:e}){let{query:t}=(0,Z.useRouter)();return{currentPage:Math.max("string"!=typeof t.page||Number.isNaN(parseInt(t.page))?1:Number(t.page),1),pageSize:"string"!=typeof t.pageSize||Number.isNaN(parseInt(t.pageSize))?e:parseInt(t.pageSize)}}({defaultPageSize:a.pageSize}),w=(0,m.aM)(ea,{variables:{listKey:e}}),{listViewFieldModesByField:k,filterableFields:x,orderableFields:_}=(0,n.useMemo)(()=>{let e={},t=new Set,i=new Set;for(let n of(null===(r=w.data)||void 0===r||null===(r=r.keystone.adminMeta.list)||void 0===r?void 0:r.fields)||[]){var r;e[n.path]=n.listView.fieldMode,n.isOrderable&&t.add(n.path),n.isFilterable&&i.add(n.path)}return{listViewFieldModesByField:e,orderableFields:t,filterableFields:i}},[null===(t=w.data)||void 0===t||null===(t=t.keystone.adminMeta.list)||void 0===t?void 0:t.fields]),I=en(a,_),$=function(e,t){let{query:i}=(0,Z.useRouter)(),r=(0,n.useMemo)(()=>{let i={};return Object.entries(e.fields).forEach(([e,r])=>{r.controller.filter&&t.has(e)&&Object.keys(r.controller.filter.types).forEach(t=>{i[`!${e}_${t}`]={type:t,field:e}})}),i},[e,t]);return(0,n.useMemo)(()=>{let t=[];Object.keys(i).forEach(e=>{let n=r[e],o=i[e];if(n&&"string"==typeof o){let e;try{e=JSON.parse(o)}catch(e){}void 0!==o&&t.push({...n,value:e})}});let n=t.reduce((t,i)=>Object.assign(t,e.fields[i.field].controller.filter.graphql({type:i.type,value:i.value})),{});return e.isSingleton?{filters:t,where:{id:{equals:1},AND:[n]}}:{filters:t,where:n}},[i,r,e])}(a,x),T=Object.keys(a.fields).filter(e=>a.fields[e].search),M=T.map(e=>a.fields[e].label),F="string"==typeof d.search?d.search:"",[q,O]=(0,n.useState)(F),z=(0,n.useMemo)(()=>{let e=F.trim();if(!e.length)return{OR:[]};let t=[],i=a.fields.id.fieldMeta;for(let r of((console.error({idField:i,value:F,meta:a.fields.id.fieldMeta}),"String"===i.type)?"uuid"===i.kind?function(e){if("string"==typeof e&&36===e.length)return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e)}(F)&&t.push({id:{equals:e}}):t.push({id:{equals:e}}):"Int"===i.type&&Number.isInteger(Number(e))?t.push({id:{equals:Number(e)}}):"BigInt"===i.type&&function(e){try{return BigInt(e),!0}catch{return!0}}(e)&&t.push({id:{equals:e}}),T)){let i=a.fields[r];t.push({[i.path]:{contains:e,mode:"insensitive"===i.search?"insensitive":void 0}})}return{OR:t}},[F,a,T]),N=e=>{let{search:t,...i}=d;e.trim()?c({query:{...i,search:e}}):c({query:i})},D=X(a,k),{data:L,error:j,refetch:B}=(0,m.aM)((0,n.useMemo)(()=>{let e=[...D].map(e=>a.fields[e].controller.graphqlSelection).join("\n");return(0,p.Ps)`
        query (
          $where: ${a.gqlNames.whereInputName},
          $take: Int!,
          $skip: Int!,
          $orderBy: [${a.gqlNames.listOrderName}!]
        ) {
          items: ${a.gqlNames.listQueryName}(
            where: $where,
            take: $take,
            skip: $skip,
            orderBy: $orderBy
          ) {
            ${D.has("id")?"":"id"}
            ${e}
          }
          count: ${a.gqlNames.listQueryCountName}(where: $where)
        }
      `},[a,D]),{fetchPolicy:"cache-and-network",errorPolicy:"all",skip:!w.data,variables:{where:{...$.where,...z},take:v,skip:(b-1)*v,orderBy:I?[{[I.field]:I.direction.toLowerCase()}]:void 0}}),[P,W]=(0,n.useState)({data:L,error:j});L&&P.data!==L&&W({data:L,error:j});let{data:V,error:A}=P,H=(0,h.m)(V,null==A?void 0:A.graphQLErrors),[U,K]=(0,n.useState)(()=>({itemsFromServer:void 0,selectedItems:new Set}));if(V&&V.items&&U.itemsFromServer!==V.items){let e=new Set;V.items.forEach(t=>{U.selectedItems.has(t.id)&&e.add(t.id)}),K({itemsFromServer:V.items,selectedItems:e})}let J=(0,l.Fg)(),G=!(null===(i=null===(r=w.data)||void 0===r||null===(r=r.keystone.adminMeta.list)||void 0===r?void 0:r.hideCreate)||void 0===i||i)||null;return(0,l.tZ)(S.P,{header:(0,l.tZ)(ef,{listKey:e}),title:a.label},null!=A&&A.graphQLErrors.length||null!=A&&A.networkError?(0,l.tZ)(C.G,{errors:null==A?void 0:A.graphQLErrors,networkError:null==A?void 0:A.networkError}):null,w.error?"Error...":null,V&&w.data?(0,l.tZ)(n.Fragment,null,null!==a.description&&(0,l.tZ)("p",{css:{marginTop:"24px",maxWidth:"704px"}},a.description),(0,l.tZ)(l.Kq,{across:!0,gap:"medium",align:"center",marginTop:"xlarge"},(0,l.tZ)("form",{onSubmit:e=>{e.preventDefault(),N(q)}},(0,l.tZ)(l.Kq,{across:!0},(0,l.tZ)(s.oi,{css:{borderRadius:"4px 0px 0px 4px"},autoFocus:!0,value:q,onChange:e=>O(e.target.value),placeholder:`Search by ${M.length?M.join(", "):"ID"}`}),(0,l.tZ)(o.zx,{css:{borderRadius:"0px 4px 4px 0px"},type:"submit"},(0,l.tZ)(f.W,null)))),G&&(0,l.tZ)(E.C,{list:a}),V.count||$.filters.length?(0,l.tZ)(Y,{listKey:e,filterableFields:x}):null,$.filters.length?(0,l.tZ)(et,{filters:$.filters,list:a}):null,!!($.filters.length||void 0!==d.sortBy||d.fields||d.search)&&(0,l.tZ)(o.zx,{size:"small",onClick:g},"Reset to defaults")),V.count?(0,l.tZ)(n.Fragment,null,(0,l.tZ)(eh,null,(()=>{let e=U.selectedItems,t=e.size;if(t){var i,r;return(0,l.tZ)(n.Fragment,null,(0,l.tZ)("span",{css:{marginRight:J.spacing.small}},"Selected ",t," of ",V.items.length),!(null===(i=null===(r=w.data)||void 0===r||null===(r=r.keystone.adminMeta.list)||void 0===r?void 0:r.hideDelete)||void 0===i||i)&&(0,l.tZ)(ep,{list:a,selectedItems:e,refetch:B}))}return(0,l.tZ)(n.Fragment,null,(0,l.tZ)(R,{currentPage:b,pageSize:v,plural:a.plural,singular:a.singular,total:V.count}),", sorted by ",(0,l.tZ)(eo,{list:a,orderableFields:_}),"with"," ",(0,l.tZ)(Q,{list:a,fieldModesByFieldPath:k})," ")})()),(0,l.tZ)(em,{count:V.count,currentPage:b,itemsGetter:H.get("items"),listKey:e,pageSize:v,selectedFields:D,sort:I,selectedItems:U.selectedItems,onSelectedItemsChange:e=>{K({itemsFromServer:U.itemsFromServer,selectedItems:e})},orderableFields:_})):(0,l.tZ)(eh,null,"No ",a.plural," found.")):(0,l.tZ)(l.M5,{css:{height:`calc(100vh - ${S.H}px)`}},(0,l.tZ)(u.xg,{label:"Loading item data",size:"large",tone:"passive"})))}let ef=({listKey:e})=>{let t=(0,y.sm)(e);return(0,l.tZ)(n.Fragment,null,(0,l.tZ)("div",{css:{alignItems:"center",display:"flex",flex:1,justifyContent:"space-between"}},(0,l.tZ)(l.X6,{type:"h3"},t.label)))},eh=({children:e})=>(0,l.tZ)("p",{css:{minHeight:38,display:"flex",alignItems:"center"}},e),eg=({direction:e})=>{let t="0.25em";return(0,l.tZ)("span",{css:{borderLeft:`${t} solid transparent`,borderRight:`${t} solid transparent`,borderTop:`${t} solid`,display:"inline-block",height:0,marginLeft:"0.33em",marginTop:"-0.125em",verticalAlign:"middle",width:0,transform:`rotate(${"DESC"===e?"0deg":"180deg"})`}})};function ep({selectedItems:e,list:t,refetch:i}){let[r,s]=(0,b.D)((0,n.useMemo)(()=>(0,p.Ps)`
        mutation($where: [${t.gqlNames.whereUniqueInputName}!]!) {
          ${t.gqlNames.deleteManyMutationName}(where: $where) {
            id
            ${t.labelField}
          }
        }
`,[t]),{errorPolicy:"all"}),[a,u]=(0,n.useState)(!1),f=(0,c.e)();return(0,l.tZ)(n.Fragment,null,(0,l.tZ)(o.zx,{isLoading:s.loading,tone:"negative",onClick:async()=>{u(!0)}},"Delete"),(0,l.tZ)(d.aR,{isOpen:a,title:"Delete Confirmation",tone:"negative",actions:{confirm:{label:"Delete",action:async()=>{let{data:n,errors:o}=await r({variables:{where:[...e].map(e=>({id:e}))}}),{successfulItems:l,unsuccessfulItems:s,successMessage:a}=n[t.gqlNames.deleteManyMutationName].reduce((e,i)=>(i?(e.successfulItems++,e.successMessage=""===e.successMessage?e.successMessage+=i[t.labelField]:e.successMessage+=`, ${i[t.labelField]}`):e.unsuccessfulItems++,e),{successfulItems:0,unsuccessfulItems:0,successMessage:""});return null!=o&&o.length&&f.addToast({tone:"negative",title:`Failed to delete ${s} of ${n[t.gqlNames.deleteManyMutationName].length} ${t.plural}`,message:o.reduce((e,t)=>(0>e.indexOf(t.message)&&e.push(t.message),e),[]).join("\n")}),l&&f.addToast({tone:"positive",title:`Deleted ${l} of ${n[t.gqlNames.deleteManyMutationName].length} ${t.plural} successfully`,message:a}),i()}},cancel:{label:"Cancel",action:()=>{u(!1)}}}},"Are you sure you want to delete ",e.size," ",1===e.size?t.singular:t.plural,"?"))}function em({selectedFields:e,listKey:t,itemsGetter:i,count:r,sort:n,currentPage:o,pageSize:u,selectedItems:d,onSelectedItemsChange:c,orderableFields:f}){var h,p;let m=(0,y.sm)(t),{query:b}=(0,Z.useRouter)(),w=!m.fields[e.keys().next().value].views.Cell.supportsLinkTo;return(0,l.tZ)(l.xu,{paddingBottom:"xlarge"},(0,l.tZ)(eb,null,(0,l.tZ)(l.TX,{as:"caption"},m.label," list"),(0,l.tZ)("colgroup",null,(0,l.tZ)("col",{width:"30"}),w&&(0,l.tZ)("col",{width:"30"}),[...e].map(e=>(0,l.tZ)("col",{key:e}))),(0,l.tZ)(ev,null,(0,l.tZ)(ey,{css:{paddingLeft:0}},(0,l.tZ)("label",{css:{display:"flex",alignItems:"center",justifyContent:"start",cursor:"pointer"}},(0,l.tZ)(s.Z8,{size:"small",checked:d.size===(null===(h=i.data)||void 0===h?void 0:h.length),css:{cursor:"default"},onChange:()=>{var e,t;let r=new Set;d.size!==(null===(e=i.data)||void 0===e?void 0:e.length)&&(null===(t=i.data)||void 0===t||t.forEach(e=>{null!==e&&null!==e.id&&r.add(e.id)})),c(r)}}))),w&&(0,l.tZ)(ey,null),[...e].map(e=>{let t=m.fields[e].label;return f.has(e)?(0,l.tZ)(ey,{key:e},(0,l.tZ)(x.rU,{css:{display:"block",textDecoration:"none",color:"inherit",":hover":{color:"inherit"}},href:{query:{...b,sortBy:(null==n?void 0:n.field)===e&&"ASC"===n.direction?`-${e}`:e}}},t,(null==n?void 0:n.field)===e&&(0,l.tZ)(eg,{direction:n.direction}))):(0,l.tZ)(ey,{key:e},t)})),(0,l.tZ)("tbody",null,(null!==(p=i.data)&&void 0!==p?p:[]).map((t,r)=>{let n=i.get(r);if(null===n.data||null===n.data.id)return n.errors?(0,l.tZ)("tr",{css:{color:"red"},key:`index:${r}`},n.errors[0].message):null;let o=n.data.id;return(0,l.tZ)("tr",{key:o||`index:${r}`},(0,l.tZ)(eZ,null,(0,l.tZ)("label",{css:{display:"flex",minHeight:38,alignItems:"center",justifyContent:"start"}},(0,l.tZ)(s.Z8,{size:"small",checked:d.has(o),css:{cursor:"default"},onChange:()=>{let e=new Set(d);d.has(o)?e.delete(o):e.add(o),c(e)}}))),w&&(0,l.tZ)(eZ,null,(0,l.tZ)(x.rU,{css:{textDecoration:"none",minHeight:38,display:"flex",alignItems:"center",justifyContent:"center"},href:`/${m.path}/[id]`,as:`/${m.path}/${encodeURIComponent(o)}`},(0,l.tZ)(a.M,{size:"smallish","aria-label":"Go to item"}))),[...e].map((e,t)=>{let i=m.fields[e],{Cell:r}=m.fields[e].views,s={};for(let a of(0,g.g)(i.controller)){let i=n.get(a);if(i.errors){let n=i.errors[0].message;return(0,l.tZ)(eZ,{css:{color:"red"},key:e},0===t&&r.supportsLinkTo?(0,l.tZ)(v.C,{href:`/${m.path}/[id]`,as:`/${m.path}/${encodeURIComponent(o)}`},n):n)}s[a]=i.data}return(0,l.tZ)(eZ,{key:e},(0,l.tZ)(r,{field:i.controller,item:s,linkTo:0===t&&r.supportsLinkTo?{href:`/${m.path}/[id]`,as:`/${m.path}/${encodeURIComponent(o)}`}:void 0}))}))}))),(0,l.tZ)($,{singular:m.singular,plural:m.plural,total:r,currentPage:o,pageSize:u}))}let eb=({children:e})=>(0,l.tZ)("table",{css:{minWidth:"100%",tableLayout:"fixed","tr:last-child td":{borderBottomWidth:0}},cellPadding:"0",cellSpacing:"0"},e),ev=({children:e})=>(0,l.tZ)("thead",null,(0,l.tZ)("tr",null,e)),ey=e=>{let{colors:t,spacing:i,typography:n}=(0,l.Fg)();return(0,l.tZ)("th",(0,r.Z)({css:{backgroundColor:t.background,borderBottom:`2px solid ${t.border}`,color:t.foregroundDim,fontSize:n.fontSize.medium,fontWeight:n.fontWeight.medium,padding:i.small,textAlign:"left",position:"sticky",top:0}},e))},eZ=e=>{let{colors:t,typography:i}=(0,l.Fg)();return(0,l.tZ)("td",(0,r.Z)({css:{borderBottom:`1px solid ${t.border}`,fontSize:i.fontSize.medium}},e))}},5346:function(e,t,i){"use strict";i.d(t,{C:function(){return l}});var r=i(6970),n=i(1053),o=i(6837);function l(e){return(0,n.tZ)(r.zx,{css:{textDecoration:"none",":hover":{color:"white"}},as:o.rU,href:`/${e.list.path}/create`,tone:"active",size:"small",weight:"bold"},"Create ",e.list.singular)}},210:function(e,t,i){"use strict";i.d(t,{G:function(){return l}});var r=i(1053),n=i(5581),o=i(1902);function l({errors:e,networkError:t}){return t?o.createElement(n.qX,{tone:"negative",marginBottom:"large"},t.message):null!=e&&e.length?o.createElement(r.Kq,{gap:"small",marginBottom:"large"},e.map((e,t)=>o.createElement(n.qX,{tone:"negative",key:t},e.message))):null}},8019:function(e,t,i){"use strict";i.d(t,{H:function(){return Z},P:function(){return S}});var r=i(4390),n=i(1053),o=i(1902),l=i(5138),s=i(6653);i(6970),i(3660),i(2550),i(1770);var a=i(3029),u=i(6837),d=i(1596),c=i(3537),f=i.n(c);let h=()=>{var e;let{spacing:t}=(0,n.Fg)(),{adminConfig:i}=(0,a.jf)();return null!==(e=i.components)&&void 0!==e&&e.Logo?(0,n.tZ)(i.components.Logo,null):(0,n.tZ)(n.H3,null,(0,n.tZ)(f(),{href:"/",css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,n.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,n.tZ)("defs",null,(0,n.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,n.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,n.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,n.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6"))},g=({href:e,children:t,isSelected:i})=>{let{colors:r,palette:o,spacing:l,radii:a,typography:d}=(0,n.Fg)(),c=(0,s.useRouter)(),f=void 0!==i?i:c.pathname===e;return(0,n.tZ)("li",null,(0,n.tZ)(u.rU,{"aria-current":!!f&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:a.xsmall,borderTopRightRadius:a.xsmall,color:o.neutral700,display:"block",fontWeight:d.fontWeight.medium,marginBottom:l.xsmall,marginRight:l.xlarge,padding:`${l.small}px ${l.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:r.backgroundHover,color:r.linkHoverColor},"&[aria-current=location]":{background:o.neutral200,color:o.neutral900}}},t))},p=({item:e})=>{let{apiPath:t}=(0,a.jf)(),{spacing:i,typography:r}=(0,n.Fg)();return(0,n.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:i.xlarge,marginBottom:0}},!!e&&"authenticated"===e.state&&(0,n.tZ)("div",{css:{fontSize:r.fontSize.small}},"Signed in as ",(0,n.tZ)("strong",{css:{display:"block"}},e.label)),e&&"authenticated"===e.state&&(0,n.tZ)(d.S,null))},m=({authenticatedItem:e,children:t})=>{let{spacing:i}=(0,n.Fg)();return(0,n.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,n.tZ)(p,{item:e}),(0,n.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:i.xlarge}},(0,n.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},t)))},b=({list:e})=>{let t=(0,s.useRouter)();return(0,n.tZ)(g,{isSelected:t.pathname.split("/")[1]===`/${e.path}`.split("/")[1],href:`/${e.path}${e.isSingleton?"/1":""}`},e.label)},v=({lists:e=[],include:t=[]})=>{let i=t.length>0?e.filter(e=>t.includes(e.key)):e;return(0,n.tZ)(o.Fragment,null,i.map(e=>(0,n.tZ)(b,{key:e.key,list:e})))},y=()=>{var e;let{adminMeta:{lists:t},adminConfig:i,authenticatedItem:r,visibleLists:o}=(0,a.jf)();if("loading"===o.state)return null;if("error"===o.state)return(0,n.tZ)(n.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},o.error instanceof Error?o.error.message:o.error[0].message);let l=Object.keys(t).map(e=>o.lists.has(e)?t[e]:null).filter(e=>!!e);return null!=i&&null!==(e=i.components)&&void 0!==e&&e.Navigation?(0,n.tZ)(i.components.Navigation,{authenticatedItem:r,lists:l}):(0,n.tZ)(m,{authenticatedItem:r},(0,n.tZ)(g,{href:"/"},"Dashboard"),(0,n.tZ)(v,{lists:l}))},Z=80,w=e=>(0,n.tZ)(o.Fragment,null,(0,n.tZ)("style",null,"body { overflow: hidden; }"),(0,n.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr)",gridTemplateRows:`repeat(2,${Z}px) auto`,height:"100vh",isolation:"isolate","@media (min-width: 576px)":{gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${Z}px auto`}}},e))),k=({isSidebarOpen:e,...t})=>(0,n.tZ)("div",{css:{gridColumn:"1/2",gridRow:"2/4",display:e?"block":"none",height:"100vh","@media (min-width: 576px)":{gridColumn:"1/2",gridRow:"2/3",display:"block",height:"100%"},overflowY:"auto",WebkitOverflowScrolling:"touch"}},(0,n.tZ)("aside",(0,r.Z)({css:{minWidth:0,WebkitOverflowScrolling:"touch"}},t))),x=e=>{let{colors:t,spacing:i}=(0,n.Fg)();return(0,n.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:i.xlarge,paddingRight:i.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},S=({children:e,header:t,title:i})=>{let{colors:r,spacing:s}=(0,n.Fg)(),[a,u]=(0,o.useState)(!1);return(0,n.tZ)(w,null,(0,n.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",paddingLeft:s.xlarge,paddingRight:s.xlarge}},(0,n.tZ)(h,null),(0,n.tZ)("div",{onClick:()=>{u(!a)},css:{display:"block","@media (min-width: 576px)":{display:"none"}}},a?(0,n.tZ)(l.oOx,null):(0,n.tZ)(l.Oqj,null))),(0,n.tZ)("header",{css:{alignItems:"center",backgroundColor:r.background,borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:s.xlarge,paddingRight:s.xlarge,visibility:a?"hidden":"visible"}},(0,n.tZ)("title",null,i?`Keystone - ${i}`:"Keystone"),(0,n.tZ)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t),(0,n.tZ)(k,{isSidebarOpen:a},(0,n.tZ)(y,null)),(0,n.tZ)(x,null,e))}},3120:function(e,t,i){"use strict";i.d(t,{g:function(){return l}});var r,n,o=i(4667);let l=(r=e=>{let t=(0,o.Qc)(`fragment X on Y {
  id
  ${e.graphqlSelection}
  }`),i=new Set;return function e(t,i){i.selections.forEach(i=>{"Field"===i.kind&&t.add(i.alias?i.alias.value:i.name.value),"InlineFragment"===i.kind&&e(t,i.selectionSet)})}(i,t.definitions[0].selectionSet),[...i]},n=new WeakMap,function(e){if(n.has(e))return n.get(e);var t=r(e);return n.set(e,t),t})},6489:function(){!function(){"use strict";if("object"==typeof window){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var e=function(e){for(var t=e,i=n(t);i;)i=n(t=i.ownerDocument);return t}(window.document),t=[],i=null,r=null;l.prototype.THROTTLE_TIMEOUT=100,l.prototype.POLL_INTERVAL=null,l.prototype.USE_MUTATION_OBSERVER=!0,l._setupCrossOriginUpdater=function(){return i||(i=function(e,i){r=e&&i?f(e,i):d(),t.forEach(function(e){e._checkForIntersections()})}),i},l._resetCrossOriginUpdater=function(){i=null,r=null},l.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!(e&&1==e.nodeType))throw Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},l.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},l.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},l.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},l.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},l.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},l.prototype._monitorIntersections=function(t){var i=t.defaultView;if(i&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,o=null,l=null;if(this.POLL_INTERVAL?o=i.setInterval(r,this.POLL_INTERVAL):(s(i,"resize",r,!0),s(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in i&&(l=new i.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push(function(){var e=t.defaultView;e&&(o&&e.clearInterval(o),a(e,"resize",r,!0)),a(t,"scroll",r,!0),l&&l.disconnect()}),t!=(this.root&&(this.root.ownerDocument||this.root)||e)){var u=n(t);u&&this._monitorIntersections(u.ownerDocument)}}},l.prototype._unmonitorIntersections=function(t){var i=this._monitoringDocuments.indexOf(t);if(-1!=i){var r=this.root&&(this.root.ownerDocument||this.root)||e;if(!this._observationTargets.some(function(e){var i=e.element.ownerDocument;if(i==t)return!0;for(;i&&i!=r;){var o=n(i);if((i=o&&o.ownerDocument)==t)return!0}return!1})){var o=this._monitoringUnsubscribes[i];if(this._monitoringDocuments.splice(i,1),this._monitoringUnsubscribes.splice(i,1),o(),t!=r){var l=n(t);l&&this._unmonitorIntersections(l.ownerDocument)}}}},l.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},l.prototype._checkForIntersections=function(){if(this.root||!i||r){var e=this._rootIsInDom(),t=e?this._getRootRect():d();this._observationTargets.forEach(function(r){var n=r.element,l=u(n),s=this._rootContainsTarget(n),a=r.entry,c=e&&s&&this._computeTargetAndRootIntersection(n,l,t),f=null;this._rootContainsTarget(n)?(!i||this.root)&&(f=t):f=d();var h=r.entry=new o({time:window.performance&&performance.now&&performance.now(),target:n,boundingClientRect:l,rootBounds:f,intersectionRect:c});a?e&&s?this._hasCrossedThreshold(a,h)&&this._queuedEntries.push(h):a&&a.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},l.prototype._computeTargetAndRootIntersection=function(t,n,o){if("none"!=window.getComputedStyle(t).display){for(var l=n,s=g(t),a=!1;!a&&s;){var d=null,c=1==s.nodeType?window.getComputedStyle(s):{};if("none"==c.display)return null;if(s==this.root||9==s.nodeType){if(a=!0,s==this.root||s==e)i&&!this.root?r&&(0!=r.width||0!=r.height)?d=r:(s=null,d=null,l=null):d=o;else{var h=g(s),p=h&&u(h),m=h&&this._computeTargetAndRootIntersection(h,p,o);p&&m?(s=h,d=f(p,m)):(s=null,l=null)}}else{var b=s.ownerDocument;s!=b.body&&s!=b.documentElement&&"visible"!=c.overflow&&(d=u(s))}if(d&&(l=function(e,t){var i=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),n=Math.max(e.left,t.left),o=Math.min(e.right,t.right),l=o-n,s=r-i;return l>=0&&s>=0&&{top:i,bottom:r,left:n,right:o,width:l,height:s}||null}(d,l)),!l)break;s=s&&g(s)}return l}},l.prototype._getRootRect=function(){var t;if(this.root&&!p(this.root))t=u(this.root);else{var i=p(this.root)?this.root:e,r=i.documentElement,n=i.body;t={top:0,left:0,right:r.clientWidth||n.clientWidth,width:r.clientWidth||n.clientWidth,bottom:r.clientHeight||n.clientHeight,height:r.clientHeight||n.clientHeight}}return this._expandRectByRootMargin(t)},l.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100}),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},l.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==r)for(var n=0;n<this.thresholds.length;n++){var o=this.thresholds[n];if(o==i||o==r||o<i!=o<r)return!0}},l.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},l.prototype._rootContainsTarget=function(t){var i=this.root&&(this.root.ownerDocument||this.root)||e;return h(i,t)&&(!this.root||i==t.ownerDocument)},l.prototype._registerInstance=function(){0>t.indexOf(this)&&t.push(this)},l.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=l,window.IntersectionObserverEntry=o}function n(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=c(e.rootBounds),this.boundingClientRect=c(e.boundingClientRect),this.intersectionRect=c(e.intersectionRect||d()),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,r=this.intersectionRect,n=r.width*r.height;i?this.intersectionRatio=Number((n/i).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function l(e,t){var i,r,n,o=t||{};if("function"!=typeof e)throw Error("callback must be a function");if(o.root&&1!=o.root.nodeType&&9!=o.root.nodeType)throw Error("root must be a Document or Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout(function(){i(),n=null},r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function s(e,t,i,r){"function"==typeof e.addEventListener?e.addEventListener(t,i,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function a(e,t,i,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,i)}function u(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):d()}function d(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function f(e,t){var i=t.top-e.top,r=t.left-e.left;return{top:i,left:r,height:t.height,width:t.width,bottom:i+t.height,right:r+t.width}}function h(e,t){for(var i=t;i;){if(i==e)return!0;i=g(i)}return!1}function g(t){var i=t.parentNode;return 9==t.nodeType&&t!=e?n(t):(i&&i.assignedSlot&&(i=i.assignedSlot.parentNode),i&&11==i.nodeType&&i.host)?i.host:i}function p(e){return e&&9===e.nodeType}}()}}]);